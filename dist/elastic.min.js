/*! elastic.js - v1.2.0 - 2020-02-14
 * https://github.com/fullscale/elastic.js
 * Copyright (c) 2020 FullScale Labs, LLC; Licensed MIT */


"use strict";function elastic(){let e,t,n,r,i,u,o,l,s,a,c,f,h,m,_,g,d,p,y,w,x,b,S,O,z,N,J=this,A=J&&J.ejs,T=Array.prototype,q=Object.prototype,F=T.slice,v=q.toString,E=q.hasOwnProperty,M=T.forEach,Q=Array.isArray,k=T.indexOf,L={};N="undefined"!=typeof exports?exports:J.ejs={},e=function(e,t){return E.call(e,t)},t=function(e,t,n){if(null!=e)if(M&&e.forEach===M)e.forEach(t,n);else if(e.length===+e.length){for(let r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e)===L)return}else for(let r in e)if(e.hasOwnProperty(r)&&t.call(n,e[r],r,e)===L)return},n=function(e){return t(F.call(arguments,1),function(t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}),e},r=function(e,t){if(null==e)return-1;let n=0,r=e.length;if(k&&e.indexOf===k)return e.indexOf(t);for(;n<r;n++)if(e[n]===t)return n;return-1},i=Q||function(e){return"[object Array]"===v.call(e)},u=function(e){return e===Object(e)},o=function(e){return"[object String]"===v.call(e)},l=function(e){return"[object Number]"===v.call(e)},s=function(e){return!0===e||!1===e||"[object Boolean]"===v.call(e)},a="function"!=typeof/./?function(e){return"function"==typeof e}:function(e){return"[object Function]"===v.call(e)},c=function(t){return u(t)&&e(t,"_type")&&a(t._type)&&e(t,"toJSON")},f=function(e){return c(e)&&"query"===e._type()},h=function(e){return c(e)&&"rescore"===e._type()},m=function(e){return c(e)&&"filter"===e._type()},_=function(e){return c(e)&&"facet"===e._type()},g=function(e){return c(e)&&"aggregation"===e._type()},d=function(e){return c(e)&&"script field"===e._type()},p=function(e){return c(e)&&"geo point"===e._type()},y=function(e){return c(e)&&"indexed shape"===e._type()},w=function(e){return c(e)&&"shape"===e._type()},x=function(e){return c(e)&&"sort"===e._type()},b=function(e){return c(e)&&"highlight"===e._type()},S=function(e){return c(e)&&"suggest"===e._type()},O=function(e){return c(e)&&"generator"===e._type()},z=function(e){return c(e)&&"score function"===e._type()},N.AggregationMixin=function(e){let t={};return t[e]={},{aggregation:function(r){if(null==r)return t[e].aggs;if(null==t[e].aggs&&(t[e].aggs={}),!g(r))throw new TypeError("Argument must be an Aggregation");return n(t[e].aggs,r.toJSON()),this},agg:function(e){return this.aggregation(e)},_type:function(){return"aggregation"},toJSON:function(){return t}}},N.DirectSettingsMixin=function(e){return{accuracy:function(t){return null==t?e.accuracy:(e.accuracy=t,this)},suggestMode:function(t){return null==t?e.suggest_mode:("missing"!==(t=t.toLowerCase())&&"popular"!==t&&"always"!==t||(e.suggest_mode=t),this)},sort:function(t){return null==t?e.sort:("score"!==(t=t.toLowerCase())&&"frequency"!==t||(e.sort=t),this)},stringDistance:function(t){return null==t?e.string_distance:("internal"!==(t=t.toLowerCase())&&"damerau_levenshtein"!==t&&"levenstein"!==t&&"jarowinkler"!==t&&"ngram"!==t||(e.string_distance=t),this)},maxEdits:function(t){return null==t?e.max_edits:(e.max_edits=t,this)},maxInspections:function(t){return null==t?e.max_inspections:(e.max_inspections=t,this)},maxTermFreq:function(t){return null==t?e.max_term_freq:(e.max_term_freq=t,this)},prefixLen:function(t){return null==t?e.prefix_len:(e.prefix_len=t,this)},minWordLen:function(t){return null==t?e.min_word_len:(e.min_word_len=t,this)},minDocFreq:function(t){return null==t?e.min_doc_freq:(e.min_doc_freq=t,this)}}},N.FacetMixin=function(e){let t={};return t[e]={},{facetFilter:function(n){if(null==n)return t[e].facet_filter;if(!m(n))throw new TypeError("Argument must be a Filter");return t[e].facet_filter=n.toJSON(),this},global:function(n){return null==n?t[e].global:(t[e].global=n,this)},mode:function(n){return null==n?t[e].mode:("collector"!==(n=n.toLowerCase())&&"post"!==n||(t[e].mode=n),this)},cacheFilter:function(n){return null==n?t[e].cache_filter:(t[e].cache_filter=n,this)},scope:function(){return this},nested:function(n){return null==n?t[e].nested:(t[e].nested=n,this)},_type:function(){return"facet"},toJSON:function(){return t}}},N.FilterMixin=function(e){let t={};return t[e]={},{name:function(n){return null==n?t[e]._name:(t[e]._name=n,this)},cache:function(n){return null==n?t[e]._cache:(t[e]._cache=n,this)},cacheKey:function(n){return null==n?t[e]._cache_key:(t[e]._cache_key=n,this)},_type:function(){return"filter"},toJSON:function(){return t}}},N.MetricsAggregationMixin=function(e,t){let r=N.AggregationMixin(e),i=r.toJSON();return delete r.aggregation,delete r.agg,i[e][t]={},n(r,{field:function(n){return null==n?i[e][t].field:(i[e][t].field=n,this)},script:function(n){return null==n?i[e][t].script:(i[e][t].script=n,this)},lang:function(n){return null==n?i[e][t].lang:(i[e][t].lang=n,this)},scriptValuesSorted:function(n){return null==n?i[e][t].script_values_sorted:(i[e][t].script_values_sorted=n,this)},params:function(n){return null==n?i[e][t].params:(i[e][t].params=n,this)}})},N.QueryMixin=function(e){let t={};return t[e]={},{boost:function(n){return null==n?t[e].boost:(t[e].boost=n,this)},_type:function(){return"query"},toJSON:function(){return t}}},N.ScoreFunctionMixin=function(e){let t={};return t[e]={},{filter:function(e){if(null==e)return t.filter;if(!m(e))throw new TypeError("Argument must be a Filter");return t.filter=e.toJSON(),this},_type:function(){return"score function"},toJSON:function(){return t}}},N.SuggestContextMixin=function(e){return{analyzer:function(t){return null==t?e.analyzer:(e.analyzer=t,this)},field:function(t){return null==t?e.field:(e.field=t,this)},size:function(t){return null==t?e.size:(e.size=t,this)},shardSize:function(t){return null==t?e.shard_size:(e.shard_size=t,this)}}},N.SuggesterMixin=function(e){let t={};return t[e]={},{text:function(n){return null==n?t[e].text:(t[e].text=n,this)},_type:function(){return"suggest"},toJSON:function(){return t}}},N.DateHistogramFacet=function(e){let t=N.FacetMixin(e),r=t.toJSON();return r[e].date_histogram={},n(t,{field:function(t){return null==t?r[e].date_histogram.field:(r[e].date_histogram.field=t,this)},keyField:function(t){return null==t?r[e].date_histogram.key_field:(r[e].date_histogram.key_field=t,this)},valueField:function(t){return null==t?r[e].date_histogram.value_field:(r[e].date_histogram.value_field=t,this)},interval:function(t){return null==t?r[e].date_histogram.interval:(r[e].date_histogram.interval=t,this)},timeZone:function(t){return null==t?r[e].date_histogram.time_zone:(r[e].date_histogram.time_zone=t,this)},preZone:function(t){return null==t?r[e].date_histogram.pre_zone:(r[e].date_histogram.pre_zone=t,this)},preZoneAdjustLargeInterval:function(t){return null==t?r[e].date_histogram.pre_zone_adjust_large_interval:(r[e].date_histogram.pre_zone_adjust_large_interval=t,this)},postZone:function(t){return null==t?r[e].date_histogram.post_zone:(r[e].date_histogram.post_zone=t,this)},preOffset:function(t){return null==t?r[e].date_histogram.pre_offset:(r[e].date_histogram.pre_offset=t,this)},postOffset:function(t){return null==t?r[e].date_histogram.post_offset:(r[e].date_histogram.post_offset=t,this)},factor:function(t){return null==t?r[e].date_histogram.factor:(r[e].date_histogram.factor=t,this)},valueScript:function(t){return null==t?r[e].date_histogram.value_script:(r[e].date_histogram.value_script=t,this)},order:function(t){return null==t?r[e].date_histogram.order:("time"!==(t=t.toLowerCase())&&"count"!==t&&"total"!==t||(r[e].date_histogram.order=t),this)},lang:function(t){return null==t?r[e].date_histogram.lang:(r[e].date_histogram.lang=t,this)},params:function(t){return null==t?r[e].date_histogram.params:(r[e].date_histogram.params=t,this)}})},N.FilterFacet=function(e){let t=N.FacetMixin(e),r=t.toJSON();return n(t,{filter:function(t){if(null==t)return r[e].filter;if(!m(t))throw new TypeError("Argument must be a Filter");return r[e].filter=t.toJSON(),this}})},N.GeoDistanceFacet=function(e){let t=N.FacetMixin(e),r=t.toJSON(),i=N.GeoPoint([0,0]),u="location";return r[e].geo_distance={location:i.toJSON(),ranges:[]},n(t,{field:function(t){let n=r[e].geo_distance[u];return null==t?u:(delete r[e].geo_distance[u],u=t,r[e].geo_distance[t]=n,this)},point:function(t){if(null==t)return i;if(!p(t))throw new TypeError("Argument must be a GeoPoint");return i=t,r[e].geo_distance[u]=t.toJSON(),this},addRange:function(t,n){return 0===arguments.length?r[e].geo_distance.ranges:(r[e].geo_distance.ranges.push({from:t,to:n}),this)},addUnboundedFrom:function(t){return null==t?r[e].geo_distance.ranges:(r[e].geo_distance.ranges.push({from:t}),this)},addUnboundedTo:function(t){return null==t?r[e].geo_distance.ranges:(r[e].geo_distance.ranges.push({to:t}),this)},unit:function(t){return null==t?r[e].geo_distance.unit:("mi"!==(t=t.toLowerCase())&&"km"!==t||(r[e].geo_distance.unit=t),this)},distanceType:function(t){return null==t?r[e].geo_distance.distance_type:("arc"!==(t=t.toLowerCase())&&"plane"!==t||(r[e].geo_distance.distance_type=t),this)},normalize:function(t){return null==t?r[e].geo_distance.normalize:(r[e].geo_distance.normalize=t,this)},valueField:function(t){return null==t?r[e].geo_distance.value_field:(r[e].geo_distance.value_field=t,this)},valueScript:function(t){return null==t?r[e].geo_distance.value_script:(r[e].geo_distance.value_script=t,this)},lang:function(t){return null==t?r[e].geo_distance.lang:(r[e].geo_distance.lang=t,this)},params:function(t){return null==t?r[e].geo_distance.params:(r[e].geo_distance.params=t,this)}})},N.HistogramFacet=function(e){let t=N.FacetMixin(e),r=t.toJSON();return r[e].histogram={},n(t,{field:function(t){return null==t?r[e].histogram.field:(r[e].histogram.field=t,this)},interval:function(t){return null==t?r[e].histogram.interval:(r[e].histogram.interval=t,this)},timeInterval:function(t){return null==t?r[e].histogram.time_interval:(r[e].histogram.time_interval=t,this)},from:function(t){return null==t?r[e].histogram.from:(r[e].histogram.from=t,this)},to:function(t){return null==t?r[e].histogram.to:(r[e].histogram.to=t,this)},valueField:function(t){return null==t?r[e].histogram.value_field:(r[e].histogram.value_field=t,this)},keyField:function(t){return null==t?r[e].histogram.key_field:(r[e].histogram.key_field=t,this)},valueScript:function(t){return null==t?r[e].histogram.value_script:(r[e].histogram.value_script=t,this)},keyScript:function(t){return null==t?r[e].histogram.key_script:(r[e].histogram.key_script=t,this)},lang:function(t){return null==t?r[e].histogram.lang:(r[e].histogram.lang=t,this)},params:function(t){return null==t?r[e].histogram.params:(r[e].histogram.params=t,this)},order:function(t){return null==t?r[e].histogram.order:("key"!==(t=t.toLowerCase())&&"count"!==t&&"total"!==t||(r[e].histogram.order=t),this)}})},N.QueryFacet=function(e){let t=N.FacetMixin(e),r=t.toJSON();return n(t,{query:function(t){if(null==t)return r[e].query;if(!f(t))throw new TypeError("Argument must be a Query");return r[e].query=t.toJSON(),this}})},N.RangeFacet=function(e){let t=N.FacetMixin(e),r=t.toJSON();return r[e].range={ranges:[]},n(t,{field:function(t){return null==t?r[e].range.field:(r[e].range.field=t,this)},keyField:function(t){return null==t?r[e].range.key_field:(r[e].range.key_field=t,this)},valueField:function(t){return null==t?r[e].range.value_field:(r[e].range.value_field=t,this)},valueScript:function(t){return null==t?r[e].range.value_script:(r[e].range.value_script=t,this)},keyScript:function(t){return null==t?r[e].range.key_script:(r[e].range.key_script=t,this)},lang:function(t){return null==t?r[e].range.lang:(r[e].range.lang=t,this)},params:function(t){return null==t?r[e].range.params:(r[e].range.params=t,this)},addRange:function(t,n){return 0===arguments.length?r[e].range.ranges:(r[e].range.ranges.push({from:t,to:n}),this)},addUnboundedFrom:function(t){return null==t?r[e].range.ranges:(r[e].range.ranges.push({from:t}),this)},addUnboundedTo:function(t){return null==t?r[e].range.ranges:(r[e].range.ranges.push({to:t}),this)}})},N.StatisticalFacet=function(e){let t=N.FacetMixin(e),r=t.toJSON();return r[e].statistical={},n(t,{field:function(t){return null==t?r[e].statistical.field:(r[e].statistical.field=t,this)},fields:function(t){if(null==t)return r[e].statistical.fields;if(!i(t))throw new TypeError("Argument must be an array");return r[e].statistical.fields=t,this},script:function(t){return null==t?r[e].statistical.script:(r[e].statistical.script=t,this)},lang:function(t){return null==t?r[e].statistical.lang:(r[e].statistical.lang=t,this)},params:function(t){return null==t?r[e].statistical.params:(r[e].statistical.params=t,this)}})},N.TermsFacet=function(e){let t=N.FacetMixin(e),r=t.toJSON();return r[e].terms={},n(t,{field:function(t){return null==t?r[e].terms.field:(r[e].terms.field=t,this)},fields:function(t){if(null==t)return r[e].terms.fields;if(!i(t))throw new TypeError("Argument must be an array");return r[e].terms.fields=t,this},scriptField:function(t){return null==t?r[e].terms.script_field:(r[e].terms.script_field=t,this)},size:function(t){return null==t?r[e].terms.size:(r[e].terms.size=t,this)},shardSize:function(t){return null==t?r[e].terms.shard_size:(r[e].terms.shard_size=t,this)},order:function(t){return null==t?r[e].terms.order:("count"!==(t=t.toLowerCase())&&"term"!==t&&"reverse_count"!==t&&"reverse_term"!==t||(r[e].terms.order=t),this)},allTerms:function(t){return null==t?r[e].terms.all_terms:(r[e].terms.all_terms=t,this)},exclude:function(t){if(null==r[e].terms.exclude&&(r[e].terms.exclude=[]),null==t)return r[e].terms.exclude;if(o(t))r[e].terms.exclude.push(t);else{if(!i(t))throw new TypeError("Argument must be string or array");r[e].terms.exclude=t}return this},regex:function(t){return null==t?r[e].terms.regex:(r[e].terms.regex=t,this)},regexFlags:function(t){return null==t?r[e].terms.regex_flags:(r[e].terms.regex_flags=t,this)},script:function(t){return null==t?r[e].terms.script:(r[e].terms.script=t,this)},lang:function(t){return null==t?r[e].terms.lang:(r[e].terms.lang=t,this)},params:function(t){return null==t?r[e].terms.params:(r[e].terms.params=t,this)},executionHint:function(t){return null==t?r[e].terms.execution_hint:(r[e].terms.execution_hint=t,this)}})},N.TermStatsFacet=function(e){let t=N.FacetMixin(e),r=t.toJSON();return r[e].terms_stats={},n(t,{valueField:function(t){return null==t?r[e].terms_stats.value_field:(r[e].terms_stats.value_field=t,this)},keyField:function(t){return null==t?r[e].terms_stats.key_field:(r[e].terms_stats.key_field=t,this)},scriptField:function(t){return null==t?r[e].terms_stats.script_field:(r[e].terms_stats.script_field=t,this)},valueScript:function(t){return null==t?r[e].terms_stats.value_script:(r[e].terms_stats.value_script=t,this)},allTerms:function(t){return null==t?r[e].terms_stats.all_terms:(r[e].terms_stats.all_terms=t,this)},lang:function(t){return null==t?r[e].terms_stats.lang:(r[e].terms_stats.lang=t,this)},params:function(t){return null==t?r[e].terms_stats.params:(r[e].terms_stats.params=t,this)},size:function(t){return null==t?r[e].terms_stats.size:(r[e].terms_stats.size=t,this)},order:function(t){return null==t?r[e].terms_stats.order:("count"!==(t=t.toLowerCase())&&"term"!==t&&"reverse_count"!==t&&"reverse_term"!==t&&"total"!==t&&"reverse_total"!==t&&"min"!==t&&"reverse_min"!==t&&"max"!==t&&"reverse_max"!==t&&"mean"!==t&&"reverse_mean"!==t||(r[e].terms_stats.order=t),this)}})},N.AvgAggregation=function(e){return N.MetricsAggregationMixin(e,"avg")},N.CardinalityAggregation=function(e){let t=N.MetricsAggregationMixin(e,"cardinality"),r=t.toJSON();return delete t.scriptValuesSorted,n(t,{rehash:function(t){return null==t?r[e].cardinality.rehash:(r[e].cardinality.rehash=t,this)},precisionThreshold:function(t){return null==t?r[e].cardinality.precision_threshold:(r[e].cardinality.precision_threshold=t,this)}})},N.ChildrenAggregation=function(e){let t=N.AggregationMixin(e),r=t.toJSON();return r[e].children={},n(t,{type:function(t){return null==t?r[e].children.type:(r[e].children.type=t,this)}})},N.DateHistogramAggregation=function(e){let t=N.AggregationMixin(e),r=t.toJSON();return r[e].date_histogram={},n(t,{field:function(t){return null==t?r[e].date_histogram.field:(r[e].date_histogram.field=t,this)},script:function(t){return null==t?r[e].date_histogram.script:(r[e].date_histogram.script=t,this)},lang:function(t){return null==t?r[e].date_histogram.lang:(r[e].date_histogram.lang=t,this)},timeZone:function(t){return null==t?r[e].date_histogram.time_zone:(r[e].date_histogram.time_zone=t,this)},preZone:function(t){return null==t?r[e].date_histogram.pre_zone:(r[e].date_histogram.pre_zone=t,this)},postZone:function(t){return null==t?r[e].date_histogram.post_zone:(r[e].date_histogram.post_zone=t,this)},preOffset:function(t){return null==t?r[e].date_histogram.pre_offset:(r[e].date_histogram.pre_offset=t,this)},postOffset:function(t){return null==t?r[e].date_histogram.post_offset:(r[e].date_histogram.post_offset=t,this)},extendedBounds:function(t,n){let i;return null==t&&null==n?r[e].date_histogram.extended_bounds:(i={},null!=t&&(i.min=t),null!=n&&(i.max=n),r[e].date_histogram.extended_bounds=i,this)},interval:function(t){return null==t?r[e].date_histogram.interval:(r[e].date_histogram.interval=t,this)},format:function(t){return null==t?r[e].date_histogram.format:(r[e].date_histogram.format=t,this)},keyed:function(t){return null==t?r[e].date_histogram.keyed:(r[e].date_histogram.keyed=t,this)},scriptValuesSorted:function(t){return null==t?r[e].date_histogram.script_values_sorted:(r[e].date_histogram.script_values_sorted=t,this)},preZoneAdjustLargeInterval:function(t){return null==t?r[e].date_histogram.pre_zone_adjust_large_interval:(r[e].date_histogram.pre_zone_adjust_large_interval=t,this)},minDocCount:function(t){return null==t?r[e].date_histogram.min_doc_count:(r[e].date_histogram.min_doc_count=t,this)},params:function(t){return null==t?r[e].date_histogram.params:(r[e].date_histogram.params=t,this)},order:function(t,n){return null==t?r[e].date_histogram.order:(null==n&&(n="desc"),"asc"!==(n=n.toLowerCase())&&"desc"!==n&&(n="desc"),r[e].date_histogram.order={},r[e].date_histogram.order[t]=n,this)}})},N.DateRangeAggregation=function(e){let t=N.AggregationMixin(e),r=t.toJSON();return r[e].date_range={},n(t,{field:function(t){return null==t?r[e].date_range.field:(r[e].date_range.field=t,this)},script:function(t){return null==t?r[e].date_range.script:(r[e].date_range.script=t,this)},lang:function(t){return null==t?r[e].date_range.lang:(r[e].date_range.lang=t,this)},format:function(t){return null==t?r[e].date_range.format:(r[e].date_range.format=t,this)},range:function(t,n,i){let u={};return null==r[e].date_range.ranges&&(r[e].date_range.ranges=[]),null==t&&null==n?r[e].date_range.ranges:(null!=t&&(u.from=t),null!=n&&(u.to=n),null!=i&&(u.key=i),r[e].date_range.ranges.push(u),this)},keyed:function(t){return null==t?r[e].date_range.keyed:(r[e].date_range.keyed=t,this)},scriptValuesSorted:function(t){return null==t?r[e].date_range.script_values_sorted:(r[e].date_range.script_values_sorted=t,this)},params:function(t){return null==t?r[e].date_range.params:(r[e].date_range.params=t,this)}})},N.ExtendedStatsAggregation=function(e){return N.MetricsAggregationMixin(e,"extended_stats")},N.FilterAggregation=function(e){let t=N.AggregationMixin(e),r=t.toJSON();return n(t,{filter:function(t){if(null==t)return r[e].filter;if(!m(t))throw new TypeError("Argument must be a Filter");return r[e].filter=t.toJSON(),this},filterQuery:function(t){if(null==t)return r[e].filter;if(!f(t))throw new TypeError("Argument must be a Query");return r[e].filter=t.toJSON(),this}})},N.FiltersAggregation=function(e){let t=N.AggregationMixin(e),r=t.toJSON();return n(t,{filters:function(t){if(null==t)return r[e].filters;let n,i,u={};for(n in r[e].filters={filters:u},t)if(t.hasOwnProperty(n)){if(i=t[n],!m(i))throw new TypeError("Argument must be a Filter");u[n]=i.toJSON()}return this}})},N.GeoDistanceAggregation=function(e){let t=N.AggregationMixin(e),r=N.GeoPoint([0,0]),i=t.toJSON();return i[e].geo_distance={},n(t,{field:function(t){return null==t?i[e].geo_distance.field:(i[e].geo_distance.field=t,this)},unit:function(t){return null==t?i[e].geo_distance.unit:("in"!==t&&"yd"!==t&&"ft"!==t&&"km"!==t&&"NM"!==t&&"mm"!==t&&"cm"!==t&&"mi"!==t&&"m"!==t||(i[e].geo_distance.unit=t),this)},distanceType:function(t){return null==t?i[e].geo_distance.distance_type:("plane"!==(t=t.toLowerCase())&&"arc"!==t&&"sloppy_arc"!==t&&"factor"!==t||(i[e].geo_distance.distance_type=t),this)},origin:function(t){if(null==t)return r;if(!p(t))throw new TypeError("Argument must be a GeoPoint");return r=t,i[e].geo_distance.origin=t.toJSON(),this},point:function(t){if(null==t)return r;if(!p(t))throw new TypeError("Argument must be a GeoPoint");return r=t,i[e].geo_distance.point=t.toJSON(),this},center:function(t){if(null==t)return r;if(!p(t))throw new TypeError("Argument must be a GeoPoint");return r=t,i[e].geo_distance.center=t.toJSON(),this},range:function(t,n,r){let u={};return null==i[e].geo_distance.ranges&&(i[e].geo_distance.ranges=[]),null==t&&null==n?i[e].geo_distance.ranges:(null!=t&&(u.from=t),null!=n&&(u.to=n),null!=r&&(u.key=r),i[e].geo_distance.ranges.push(u),this)},keyed:function(t){return null==t?i[e].geo_distance.keyed:(i[e].geo_distance.keyed=t,this)}})},N.GeoHashGridAggregation=function(e){let t=N.AggregationMixin(e),r=t.toJSON();return r[e].geohash_grid={},n(t,{field:function(t){return null==t?r[e].geohash_grid.field:(r[e].geohash_grid.field=t,this)},precision:function(t){return null==t?r[e].geohash_grid.precision:(r[e].geohash_grid.precision=t,this)},size:function(t){return null==t?r[e].geohash_grid.size:(r[e].geohash_grid.size=t,this)},shardSize:function(t){return null==t?r[e].geohash_grid.shard_size:(r[e].geohash_grid.shard_size=t,this)}})},N.GlobalAggregation=function(e){let t=N.AggregationMixin(e);return t.toJSON()[e].global={},t},N.HistogramAggregation=function(e){let t=N.AggregationMixin(e),r=t.toJSON();return r[e].histogram={},n(t,{field:function(t){return null==t?r[e].histogram.field:(r[e].histogram.field=t,this)},script:function(t){return null==t?r[e].histogram.script:(r[e].histogram.script=t,this)},lang:function(t){return null==t?r[e].histogram.lang:(r[e].histogram.lang=t,this)},format:function(t){return null==t?r[e].histogram.format:(r[e].histogram.format=t,this)},extendedBounds:function(t,n){let i;return null==t&&null==n?r[e].histogram.extended_bounds:(i={},null!=t&&(i.min=t),null!=n&&(i.max=n),r[e].histogram.extended_bounds=i,this)},interval:function(t){return null==t?r[e].histogram.interval:(r[e].histogram.interval=t,this)},minDocCount:function(t){return null==t?r[e].histogram.min_doc_count:(r[e].histogram.min_doc_count=t,this)},keyed:function(t){return null==t?r[e].histogram.keyed:(r[e].histogram.keyed=t,this)},scriptValuesSorted:function(t){return null==t?r[e].histogram.script_values_sorted:(r[e].histogram.script_values_sorted=t,this)},params:function(t){return null==t?r[e].histogram.params:(r[e].histogram.params=t,this)},order:function(t,n){return null==t?r[e].histogram.order:(null==n&&(n="desc"),"asc"!==(n=n.toLowerCase())&&"desc"!==n&&(n="desc"),r[e].histogram.order={},r[e].histogram.order[t]=n,this)}})},N.IPv4RangeAggregation=function(e){let t=N.AggregationMixin(e),r=t.toJSON();return r[e].ip_range={},n(t,{field:function(t){return null==t?r[e].ip_range.field:(r[e].ip_range.field=t,this)},script:function(t){return null==t?r[e].ip_range.script:(r[e].ip_range.script=t,this)},lang:function(t){return null==t?r[e].ip_range.lang:(r[e].ip_range.lang=t,this)},range:function(t,n,i,u){let o={};return null==r[e].ip_range.ranges&&(r[e].ip_range.ranges=[]),null==t&&null==n&&null==i?r[e].ip_range.ranges:(null!=t&&(o.from=t),null!=n&&(o.to=n),null!=i&&(o.mask=i),null!=u&&(o.key=u),r[e].ip_range.ranges.push(o),this)},keyed:function(t){return null==t?r[e].ip_range.keyed:(r[e].ip_range.keyed=t,this)},scriptValuesSorted:function(t){return null==t?r[e].ip_range.script_values_sorted:(r[e].ip_range.script_values_sorted=t,this)},params:function(t){return null==t?r[e].ip_range.params:(r[e].ip_range.params=t,this)}})},N.MaxAggregation=function(e){return N.MetricsAggregationMixin(e,"max")},N.MinAggregation=function(e){return N.MetricsAggregationMixin(e,"min")},N.MissingAggregation=function(e){let t=N.AggregationMixin(e),r=t.toJSON();return r[e].missing={},n(t,{field:function(t){return null==t?r[e].missing.field:(r[e].missing.field=t,this)}})},N.NestedAggregation=function(e){let t=N.AggregationMixin(e),r=t.toJSON();return r[e].nested={},n(t,{path:function(t){return null==t?r[e].nested.path:(r[e].nested.path=t,this)}})},N.PercentilesAggregation=function(e){let t=N.MetricsAggregationMixin(e,"percentiles"),r=t.toJSON();return n(t,{keyed:function(t){return null==t?r[e].percentiles.keyed:(r[e].percentiles.keyed=t,this)},percents:function(t){if(null==t)return r[e].percentiles.percents;if(!i(t))throw new TypeError("Percents must be an array of doubles");return r[e].percentiles.percents=t,this},percent:function(t){return null==r[e].percentiles.percents&&(r[e].percentiles.percents=[]),null==t?r[e].percentiles.percents:(r[e].percentiles.percents.push(t),this)},compression:function(t){let n=r[e].percentiles.tdigest;return null==t?n&&n.compression:(n||(n=r[e].percentiles.tdigest={}),n.compression=t,this)}})},N.RangeAggregation=function(e){let t=N.AggregationMixin(e),r=t.toJSON();return r[e].range={},n(t,{field:function(t){return null==t?r[e].range.field:(r[e].range.field=t,this)},script:function(t){return null==t?r[e].range.script:(r[e].range.script=t,this)},lang:function(t){return null==t?r[e].range.lang:(r[e].range.lang=t,this)},range:function(t,n,i){let u={};return null==r[e].range.ranges&&(r[e].range.ranges=[]),null==t&&null==n?r[e].range.ranges:(null!=t&&(u.from=t),null!=n&&(u.to=n),null!=i&&(u.key=i),r[e].range.ranges.push(u),this)},keyed:function(t){return null==t?r[e].range.keyed:(r[e].range.keyed=t,this)},scriptValuesSorted:function(t){return null==t?r[e].range.script_values_sorted:(r[e].range.script_values_sorted=t,this)},params:function(t){return null==t?r[e].range.params:(r[e].range.params=t,this)}})},N.ReverseNestedAggregation=function(e){let t=N.AggregationMixin(e),r=t.toJSON();return r[e].reverse_nested={},n(t,{reversePath:function(t){return null==t?r[e].reverse_nested.path:(r[e].reverse_nested.path=t,this)}})},N.SignificantTermsAggregation=function(e){let t=N.AggregationMixin(e),r=t.toJSON();return r[e].significant_terms={},n(t,{field:function(t){return null==t?r[e].significant_terms.field:(r[e].significant_terms.field=t,this)},format:function(t){return null==t?r[e].significant_terms.format:(r[e].significant_terms.format=t,this)},include:function(t,n){if(null==r[e].significant_terms.include&&(r[e].significant_terms.include=[]),null==t)return this;if(o(t))r[e].significant_terms.include.push(t);else{if(!i(t))throw new TypeError("Argument must be string or array");r[e].significant_terms.include=t}return null!=n&&(r[e].significant_terms.include.flags=n),this},exclude:function(t,n){if(null==r[e].significant_terms.exclude&&(r[e].significant_terms.exclude=[]),null==t)return this;if(o(t))r[e].significant_terms.exclude.push(t);else{if(!i(t))throw new TypeError("Argument must be string or array");r[e].significant_terms.exclude=t}return null!=n&&(r[e].significant_terms.exclude.flags=n),this},executionHint:function(t){return null==t?r[e].significant_terms.execution_hint:("map"!==(t=t.toLowerCase())&&"ordinals"!==t||(r[e].significant_terms.execution_hint=t),this)},size:function(t){return null==t?r[e].significant_terms.size:(r[e].significant_terms.size=t,this)},shardSize:function(t){return null==t?r[e].significant_terms.shard_size:(r[e].significant_terms.shard_size=t,this)},minDocCount:function(t){return null==t?r[e].significant_terms.min_doc_count:(r[e].significant_terms.min_doc_count=t,this)}})},N.StatsAggregation=function(e){return N.MetricsAggregationMixin(e,"stats")},N.SumAggregation=function(e){return N.MetricsAggregationMixin(e,"sum")},N.TermsAggregation=function(e){let t=N.AggregationMixin(e),r=t.toJSON();return r[e].terms={},n(t,{field:function(t){return null==t?r[e].terms.field:(r[e].terms.field=t,this)},script:function(t){return null==t?r[e].terms.script:(r[e].terms.script=t,this)},lang:function(t){return null==t?r[e].terms.lang:(r[e].terms.lang=t,this)},valueType:function(t){return null==t?r[e].terms.value_type:("string"!==(t=t.toLowerCase())&&"double"!==t&&"float"!==t&&"long"!==t&&"integer"!==t&&"short"!==t&&"byte"!==t||(r[e].terms.value_type=t),this)},format:function(t){return null==t?r[e].terms.format:(r[e].terms.format=t,this)},include:function(t,n){if(null==r[e].terms.include&&(r[e].terms.include=[]),null==t)return this;if(o(t))r[e].terms.include.push(t);else{if(!i(t))throw new TypeError("Argument must be string or array");r[e].terms.include=t}return null!=n&&(r[e].terms.include.flags=n),this},exclude:function(t,n){if(null==r[e].terms.exclude&&(r[e].terms.exclude=[]),null==t)return this;if(o(t))r[e].terms.exclude.push(t);else{if(!i(t))throw new TypeError("Argument must be string or array");r[e].terms.exclude=t}return null!=n&&(r[e].terms.exclude.flags=n),this},executionHint:function(t){return null==t?r[e].terms.execution_hint:("map"!==(t=t.toLowerCase())&&"ordinals"!==t||(r[e].terms.execution_hint=t),this)},scriptValuesUnique:function(t){return null==t?r[e].terms.script_values_unique:(r[e].terms.script_values_unique=t,this)},size:function(t){return null==t?r[e].terms.size:(r[e].terms.size=t,this)},shardSize:function(t){return null==t?r[e].terms.shard_size:(r[e].terms.shard_size=t,this)},minDocCount:function(t){return null==t?r[e].terms.min_doc_count:(r[e].terms.min_doc_count=t,this)},params:function(t){return null==t?r[e].terms.params:(r[e].terms.params=t,this)},order:function(t,n){return null==t?r[e].terms.order:(null==n&&(n="desc"),"asc"!==(n=n.toLowerCase())&&"desc"!==n&&(n="desc"),r[e].terms.order={},r[e].terms.order[t]=n,this)}})},N.TopHitsAggregation=function(t){let r=N.MetricsAggregationMixin(t,"top_hits"),u=r.toJSON();return u[t].top_hits={size:0,from:0},n(r,{from:function(e){return null==e?u[t].top_hits.from:(u[t].top_hits.from=e,this)},size:function(e){return null==e?u[t].top_hits.size:(u[t].top_hits.size=e,this)},sort:function(n){let r,l,s=u[t].top_hits;if(e(s,"sort")||(s.sort=[]),0===arguments.length)return s.sort;if(1===arguments.length){let e=n;if(o(e))s.sort.push(e);else if(x(e))s.sort.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be string, Sort, or array");for(s.sort=[],r=0,l=e.length;r<l;r++)if(o(e[r]))s.sort.push(e[r]);else{if(!x(e[r]))throw new TypeError("Invalid object in array");s.sort.push(e[r].toJSON())}}}else if(2===arguments.length){let e=n,t=arguments[1];if(o(e)&&o(t)&&("asc"===(t=t.toLowerCase())||"desc"===t)){let n={};n[e]={order:t},s.sort.push(n)}}return this},trackScores:function(e){return null==e?u[t].top_hits.track_scores:(u[t].top_hits.track_scores=e,this)},version:function(e){return null==e?u[t].top_hits.version:(u[t].top_hits.version=e,this)},explain:function(e){return null==e?u[t].top_hits.explain:(u[t].top_hits.explain=e,this)},highlight:function(e){if(null==e)return u[t].top_hits.highlight;if(!b(e))throw new TypeError("Argument must be a Highlight object");return u[t].top_hits.highlight=e.toJSON(),this},scriptField:function(e){if(null==e)return u[t].top_hits.script_fields;if(null==u[t].top_hits.script_fields&&(u[t].top_hits.script_fields={}),!d(e))throw new TypeError("Argument must be a ScriptField");return n(u[t].top_hits.script_fields,e.toJSON()),this},fieldDataFields:function(e){let n=u[t].top_hits;if(null==e)return n.fielddata_fields;if(null==n.fielddata_fields&&(n.fielddata_fields=[]),o(e))n.fielddata_fields.push(e);else{if(!i(e))throw new TypeError("Argument must be a string or an array");n.fielddata_fields=e}return this},source:function(e,n){let r=u[t].top_hits;if(null==e&&null==n)return r._source;if(!i(e)&&!o(e)&&!s(e))throw new TypeError("Argument includes must be a string, an array, or a boolean");if(null!=n&&!i(n)&&!o(n))throw new TypeError("Argument excludes must be a string or an array");return s(e)?r._source=e:(r._source={includes:e},null!=n&&(r._source.excludes=n)),this}})},N.ValueCountAggregation=function(e){let t=N.MetricsAggregationMixin(e,"value_count"),r=t.toJSON();return delete t.scriptValuesSorted,n(t,{scriptValuesUnique:function(t){return null==t?r[e].value_count.script_values_unique:(r[e].value_count.script_values_unique=t,this)}})},N.AndFilter=function(e){let t,r,u=N.FilterMixin("and"),o=u.toJSON();if(o.and.filters=[],m(e))o.and.filters.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be a Filter or Array of Filters");for(t=0,r=e.length;t<r;t++){if(!m(e[t]))throw new TypeError("Array must contain only Filter objects");o.and.filters.push(e[t].toJSON())}}return n(u,{filters:function(e){let t,n;if(null==e)return o.and.filters;if(m(e))o.and.filters.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be a Filter or an Array of Filters");for(o.and.filters=[],t=0,n=e.length;t<n;t++){if(!m(e[t]))throw new TypeError("Array must contain only Filter objects");o.and.filters.push(e[t].toJSON())}}return this}})},N.BoolFilter=function(){let e=N.FilterMixin("bool"),t=e.toJSON();return n(e,{must:function(e){let n,r;if(null==t.bool.must&&(t.bool.must=[]),null==e)return t.bool.must;if(m(e))t.bool.must.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be a Filter or array of Filters");for(t.bool.must=[],n=0,r=e.length;n<r;n++){if(!m(e[n]))throw new TypeError("Argument must be an array of Filters");t.bool.must.push(e[n].toJSON())}}return this},mustNot:function(e){let n,r;if(null==t.bool.must_not&&(t.bool.must_not=[]),null==e)return t.bool.must_not;if(m(e))t.bool.must_not.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be a Filter or array of Filters");for(t.bool.must_not=[],n=0,r=e.length;n<r;n++){if(!m(e[n]))throw new TypeError("Argument must be an array of Filters");t.bool.must_not.push(e[n].toJSON())}}return this},should:function(e){let n,r;if(null==t.bool.should&&(t.bool.should=[]),null==e)return t.bool.should;if(m(e))t.bool.should.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be a Filter or array of Filters");for(t.bool.should=[],n=0,r=e.length;n<r;n++){if(!m(e[n]))throw new TypeError("Argument must be an array of Filters");t.bool.should.push(e[n].toJSON())}}return this}})},N.ExistsFilter=function(e){let t=N.FilterMixin("exists"),r=t.toJSON();return r.exists.field=e,n(t,{field:function(e){return null==e?r.exists.field:(r.exists.field=e,this)}})},N.GeoBboxFilter=function(e){let t=N.FilterMixin("geo_bounding_box"),r=t.toJSON();return r.geo_bounding_box[e]={},n(t,{field:function(t){let n=r.geo_bounding_box[e];return null==t?e:(delete r.geo_bounding_box[e],e=t,r.geo_bounding_box[t]=n,this)},topLeft:function(t){if(null==t)return r.geo_bounding_box[e].top_left;if(!p(t))throw new TypeError("Argument must be a GeoPoint");return r.geo_bounding_box[e].top_left=t.toJSON(),this},bottomRight:function(t){if(null==t)return r.geo_bounding_box[e].bottom_right;if(!p(t))throw new TypeError("Argument must be a GeoPoint");return r.geo_bounding_box[e].bottom_right=t.toJSON(),this},type:function(e){return null==e?r.geo_bounding_box.type:("memory"!==(e=e.toLowerCase())&&"indexed"!==e||(r.geo_bounding_box.type=e),this)},normalize:function(e){return null==e?r.geo_bounding_box.normalize:(r.geo_bounding_box.normalize=e,this)}})},N.GeoDistanceFilter=function(e){let t=N.FilterMixin("geo_distance"),r=t.toJSON();return r.geo_distance[e]=[0,0],n(t,{field:function(t){let n=r.geo_distance[e];return null==t?e:(delete r.geo_distance[e],e=t,r.geo_distance[t]=n,this)},distance:function(e){if(null==e)return r.geo_distance.distance;if(!l(e)&&!o(e))throw new TypeError("Argument must be a numeric or string value");return r.geo_distance.distance=e+"",this},unit:function(e){return null==e?r.geo_distance.unit:("mi"!==(e=e.toLowerCase())&&"km"!==e||(r.geo_distance.unit=e),this)},point:function(t){if(null==t)return r.geo_distance[e];if(!p(t))throw new TypeError("Argument must be a GeoPoint");return r.geo_distance[e]=t.toJSON(),this},distanceType:function(e){return null==e?r.geo_distance.distance_type:("arc"!==(e=e.toLowerCase())&&"plane"!==e||(r.geo_distance.distance_type=e),this)},normalize:function(e){return null==e?r.geo_distance.normalize:(r.geo_distance.normalize=e,this)},optimizeBbox:function(e){return null==e?r.geo_distance.optimize_bbox:("memory"!==(e=e.toLowerCase())&&"indexed"!==e&&"none"!==e||(r.geo_distance.optimize_bbox=e),this)}})},N.GeoDistanceRangeFilter=function(e){let t=N.FilterMixin("geo_distance_range"),r=t.toJSON();return r.geo_distance_range[e]=[0,0],n(t,{field:function(t){let n=r.geo_distance_range[e];return null==t?e:(delete r.geo_distance_range[e],e=t,r.geo_distance_range[t]=n,this)},from:function(e){if(null==e)return r.geo_distance_range.from;if(!l(e))throw new TypeError("Argument must be a numeric value");return r.geo_distance_range.from=e,this},to:function(e){if(null==e)return r.geo_distance_range.to;if(!l(e))throw new TypeError("Argument must be a numeric value");return r.geo_distance_range.to=e,this},includeLower:function(e){return null==e?r.geo_distance_range.include_lower:(r.geo_distance_range.include_lower=e,this)},includeUpper:function(e){return null==e?r.geo_distance_range.include_upper:(r.geo_distance_range.include_upper=e,this)},gt:function(e){if(null==e)return r.geo_distance_range.gt;if(!l(e))throw new TypeError("Argument must be a numeric value");return r.geo_distance_range.gt=e,this},gte:function(e){if(null==e)return r.geo_distance_range.gte;if(!l(e))throw new TypeError("Argument must be a numeric value");return r.geo_distance_range.gte=e,this},lt:function(e){if(null==e)return r.geo_distance_range.lt;if(!l(e))throw new TypeError("Argument must be a numeric value");return r.geo_distance_range.lt=e,this},lte:function(e){if(null==e)return r.geo_distance_range.lte;if(!l(e))throw new TypeError("Argument must be a numeric value");return r.geo_distance_range.lte=e,this},unit:function(e){return null==e?r.geo_distance_range.unit:("mi"!==(e=e.toLowerCase())&&"km"!==e||(r.geo_distance_range.unit=e),this)},point:function(t){if(null==t)return r.geo_distance_range[e];if(!p(t))throw new TypeError("Argument must be a GeoPoint");return r.geo_distance_range[e]=t.toJSON(),this},distanceType:function(e){return null==e?r.geo_distance_range.distance_type:("arc"!==(e=e.toLowerCase())&&"plane"!==e||(r.geo_distance_range.distance_type=e),this)},normalize:function(e){return null==e?r.geo_distance_range.normalize:(r.geo_distance_range.normalize=e,this)},optimizeBbox:function(e){return null==e?r.geo_distance_range.optimize_bbox:("memory"!==(e=e.toLowerCase())&&"indexed"!==e&&"none"!==e||(r.geo_distance_range.optimize_bbox=e),this)}})},N.GeoPolygonFilter=function(e){let t=N.FilterMixin("geo_polygon"),r=t.toJSON();return r.geo_polygon[e]={points:[]},n(t,{field:function(t){let n=r.geo_polygon[e];return null==t?e:(delete r.geo_polygon[e],e=t,r.geo_polygon[t]=n,this)},points:function(t){let n,u;if(null==t)return r.geo_polygon[e].points;if(p(t))r.geo_polygon[e].points.push(t.toJSON());else{if(!i(t))throw new TypeError("Argument must be a GeoPoint or Array of GeoPoints");for(r.geo_polygon[e].points=[],n=0,u=t.length;n<u;n++){if(!p(t[n]))throw new TypeError("Argument must be Array of GeoPoints");r.geo_polygon[e].points.push(t[n].toJSON())}}return this},normalize:function(e){return null==e?r.geo_polygon.normalize:(r.geo_polygon.normalize=e,this)}})},N.GeoShapeFilter=function(e){let t=N.FilterMixin("geo_shape"),r=t.toJSON();return r.geo_shape[e]={},n(t,{field:function(t){let n=r.geo_shape[e];return null==t?e:(delete r.geo_shape[e],e=t,r.geo_shape[t]=n,this)},shape:function(t){return null==t?r.geo_shape[e].shape:(null!=r.geo_shape[e].indexed_shape&&delete r.geo_shape[e].indexed_shape,r.geo_shape[e].shape=t.toJSON(),this)},indexedShape:function(t){return null==t?r.geo_shape[e].indexed_shape:(null!=r.geo_shape[e].shape&&delete r.geo_shape[e].shape,r.geo_shape[e].indexed_shape=t.toJSON(),this)},relation:function(t){return null==t?r.geo_shape[e].relation:("intersects"!==(t=t.toLowerCase())&&"disjoint"!==t&&"within"!==t||(r.geo_shape[e].relation=t),this)},strategy:function(t){return null==t?r.geo_shape[e].strategy:("recursive"!==(t=t.toLowerCase())&&"term"!==t||(r.geo_shape[e].strategy=t),this)}})},N.HasChildFilter=function(e,t){let r=N.FilterMixin("has_child"),i=r.toJSON();if(f(e))i.has_child.query=e.toJSON();else if(m(e))i.has_child.filter=e.toJSON();else if(null!=e)throw new TypeError("Argument must be query or filter");return i.has_child.type=t,n(r,{query:function(e){if(null==e)return i.has_child.query;if(!f(e))throw new TypeError("Argument must be a Query object");return i.has_child.query=e.toJSON(),this},filter:function(e){if(null==e)return i.has_child.filter;if(!m(e))throw new TypeError("Argument must be a Filter object");return i.has_child.filter=e.toJSON(),this},type:function(e){return null==e?i.has_child.type:(i.has_child.type=e,this)},shortCircuitCutoff:function(e){return null==e?i.has_child.short_circuit_cutoff:(i.has_child.short_circuit_cutoff=e,this)},scope:function(){return this}})},N.HasParentFilter=function(e,t){let r=N.FilterMixin("has_parent"),i=r.toJSON();if(f(e))i.has_parent.query=e.toJSON();else if(m(e))i.has_parent.filter=e.toJSON();else if(null!=e)throw new TypeError("Argument must be query or filter");return i.has_parent.parent_type=t,n(r,{query:function(e){if(null==e)return i.has_parent.query;if(!f(e))throw new TypeError("Argument must be a Query object");return i.has_parent.query=e.toJSON(),this},filter:function(e){if(null==e)return i.has_parent.filter;if(!m(e))throw new TypeError("Argument must be a Filter object");return i.has_parent.filter=e.toJSON(),this},parentType:function(e){return null==e?i.has_parent.parent_type:(i.has_parent.parent_type=e,this)},scope:function(){return this}})},N.IdsFilter=function(e){let t=N.FilterMixin("ids"),r=t.toJSON();if(o(e))r.ids.values=[e];else{if(!i(e))throw new TypeError("Argument must be a string or an array");r.ids.values=e}return n(t,{values:function(e){if(null==e)return r.ids.values;if(o(e))r.ids.values.push(e);else{if(!i(e))throw new TypeError("Argument must be a string or an array");r.ids.values=e}return this},type:function(e){if(null==r.ids.type&&(r.ids.type=[]),null==e)return r.ids.type;if(o(e))r.ids.type.push(e);else{if(!i(e))throw new TypeError("Argument must be a string or an array");r.ids.type=e}return this}})},N.IndicesFilter=function(e,t){if(!m(e))throw new TypeError("Argument must be a Filter");let r=N.FilterMixin("indices"),u=r.toJSON();if(u.indices.filter=e.toJSON(),o(t))u.indices.indices=[t];else{if(!i(t))throw new TypeError("Argument must be a string or array");u.indices.indices=t}return n(r,{indices:function(e){if(null==e)return u.indices.indices;if(o(e))u.indices.indices.push(e);else{if(!i(e))throw new TypeError("Argument must be a string or array");u.indices.indices=e}return this},filter:function(e){if(null==e)return u.indices.filter;if(!m(e))throw new TypeError("Argument must be a Filter");return u.indices.filter=e.toJSON(),this},noMatchFilter:function(e){if(null==e)return u.indices.no_match_filter;if(o(e))"none"!==(e=e.toLowerCase())&&"all"!==e||(u.indices.no_match_filter=e);else{if(!m(e))throw new TypeError("Argument must be string or Filter");u.indices.no_match_filter=e.toJSON()}return this}})},N.LimitFilter=function(e){let t=N.FilterMixin("limit"),r=t.toJSON();return r.limit.value=e,n(t,{value:function(e){if(null==e)return r.limit.value;if(!l(e))throw new TypeError("Argument must be a numeric value");return r.limit.value=e,this}})},N.MatchAllFilter=function(){return N.FilterMixin("match_all")},N.MissingFilter=function(e){let t=N.FilterMixin("missing"),r=t.toJSON();return r.missing.field=e,n(t,{field:function(e){return null==e?r.missing.field:(r.missing.field=e,this)},existence:function(e){return null==e?r.missing.existence:(r.missing.existence=e,this)},nullValue:function(e){return null==e?r.missing.null_value:(r.missing.null_value=e,this)}})},N.NestedFilter=function(e){let t=N.FilterMixin("nested"),r=t.toJSON();return r.nested.path=e,n(t,{path:function(e){return null==e?r.nested.path:(r.nested.path=e,this)},query:function(e){if(null==e)return r.nested.query;if(!f(e))throw new TypeError("Argument must be a Query object");return r.nested.query=e.toJSON(),this},filter:function(e){if(null==e)return r.nested.filter;if(!m(e))throw new TypeError("Argument must be a Filter object");return r.nested.filter=e.toJSON(),this},boost:function(e){return null==e?r.nested.boost:(r.nested.boost=e,this)},join:function(e){return null==e?r.nested.join:(r.nested.join=e,this)},scope:function(){return this}})},N.NotFilter=function(e){if(!m(e))throw new TypeError("Argument must be a Filter");let t=N.FilterMixin("not"),r=t.toJSON();return r.not=e.toJSON(),n(t,{filter:function(e){if(null==e)return r.not;if(!m(e))throw new TypeError("Argument must be a Filter");return r.not=e.toJSON(),this}})},N.NumericRangeFilter=function(e){let t=N.FilterMixin("numeric_range"),r=t.toJSON();return r.numeric_range[e]={},n(t,{field:function(t){let n=r.numeric_range[e];return null==t?e:(delete r.numeric_range[e],e=t,r.numeric_range[e]=n,this)},from:function(t){if(null==t)return r.numeric_range[e].from;if(!l(t))throw new TypeError("Argument must be a numeric value");return r.numeric_range[e].from=t,this},to:function(t){if(null==t)return r.numeric_range[e].to;if(!l(t))throw new TypeError("Argument must be a numeric value");return r.numeric_range[e].to=t,this},includeLower:function(t){return null==t?r.numeric_range[e].include_lower:(r.numeric_range[e].include_lower=t,this)},includeUpper:function(t){return null==t?r.numeric_range[e].include_upper:(r.numeric_range[e].include_upper=t,this)},gt:function(t){if(null==t)return r.numeric_range[e].gt;if(!l(t))throw new TypeError("Argument must be a numeric value");return r.numeric_range[e].gt=t,this},gte:function(t){if(null==t)return r.numeric_range[e].gte;if(!l(t))throw new TypeError("Argument must be a numeric value");return r.numeric_range[e].gte=t,this},lt:function(t){if(null==t)return r.numeric_range[e].lt;if(!l(t))throw new TypeError("Argument must be a numeric value");return r.numeric_range[e].lt=t,this},lte:function(t){if(null==t)return r.numeric_range[e].lte;if(!l(t))throw new TypeError("Argument must be a numeric value");return r.numeric_range[e].lte=t,this}})},N.OrFilter=function(e){let t,r,u=N.FilterMixin("or"),o=u.toJSON();if(o.or.filters=[],m(e))o.or.filters.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be a Filter or array of Filters");for(t=0,r=e.length;t<r;t++){if(!m(e[t]))throw new TypeError("Argument must be array of Filters");o.or.filters.push(e[t].toJSON())}}return n(u,{filters:function(e){let t,n;if(null==e)return o.or.filters;if(m(e))o.or.filters.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be a Filter or array of Filters");for(o.or.filters=[],t=0,n=e.length;t<n;t++){if(!m(e[t]))throw new TypeError("Argument must be an array of Filters");o.or.filters.push(e[t].toJSON())}}return this}})},N.PrefixFilter=function(e,t){let r=N.FilterMixin("prefix"),i=r.toJSON();return i.prefix[e]=t,n(r,{field:function(t){let n=i.prefix[e];return null==t?e:(delete i.prefix[e],e=t,i.prefix[e]=n,this)},prefix:function(t){return null==t?i.prefix[e]:(i.prefix[e]=t,this)}})},N.QueryFilter=function(e){if(!f(e))throw new TypeError("Argument must be a Query");let t=N.FilterMixin("query"),r=t.toJSON();return r.query=e.toJSON(),n(t,{query:function(e){if(null==e)return r.query;if(!f(e))throw new TypeError("Argument must be a Query");return r.query=e.toJSON(),this},toJSON:function(){return r.query}})},N.RangeFilter=function(e){let t=N.FilterMixin("range"),r=t.toJSON();return r.range[e]={},n(t,{field:function(t){let n=r.range[e];return null==t?e:(delete r.range[e],e=t,r.range[t]=n,this)},from:function(t){return null==t?r.range[e].from:(r.range[e].from=t,this)},to:function(t){return null==t?r.range[e].to:(r.range[e].to=t,this)},includeLower:function(t){return null==t?r.range[e].include_lower:(r.range[e].include_lower=t,this)},includeUpper:function(t){return null==t?r.range[e].include_upper:(r.range[e].include_upper=t,this)},gt:function(t){return null==t?r.range[e].gt:(r.range[e].gt=t,this)},gte:function(t){return null==t?r.range[e].gte:(r.range[e].gte=t,this)},lt:function(t){return null==t?r.range[e].lt:(r.range[e].lt=t,this)},lte:function(t){return null==t?r.range[e].lte:(r.range[e].lte=t,this)}})},N.RegexpFilter=function(e,t){let r=N.FilterMixin("regexp"),i=r.toJSON();return i.regexp[e]={value:t},n(r,{field:function(t){let n=i.regexp[e];return null==t?e:(delete i.regexp[e],e=t,i.regexp[t]=n,this)},value:function(t){return null==t?i.regexp[e].value:(i.regexp[e].value=t,this)},flags:function(t){return null==t?i.regexp[e].flags:(i.regexp[e].flags=t,this)},flagsValue:function(t){return null==t?i.regexp[e].flags_value:(i.regexp[e].flags_value=t,this)}})},N.ScriptFilter=function(e){let t=N.FilterMixin("script"),r=t.toJSON();return r.script.script=e,n(t,{script:function(e){return null==e?r.script.script:(r.script.script=e,this)},params:function(e){return null==e?r.script.params:(r.script.params=e,this)},lang:function(e){return null==e?r.script.lang:(r.script.lang=e,this)}})},N.TermFilter=function(e,t){let r=N.FilterMixin("term"),i=r.toJSON();return i.term[e]=t,n(r,{field:function(t){let n=i.term[e];return null==t?e:(delete i.term[e],e=t,i.term[e]=n,this)},term:function(t){return null==t?i.term[e]:(i.term[e]=t,this)}})},N.TermsFilter=function(e,t){let r=N.FilterMixin("terms"),u=r.toJSON(),o=function(){i(u.terms[e])&&(u.terms[e]={})};return i(t)?u.terms[e]=t:u.terms[e]=[t],n(r,{field:function(t){let n=u.terms[e];return null==t?e:(delete u.terms[e],e=t,u.terms[t]=n,this)},terms:function(t){return i(u.terms[e])||(u.terms[e]=[]),null==t?u.terms[e]:(i(t)?u.terms[e]=t:u.terms[e].push(t),this)},index:function(t){return o(),null==t?u.terms[e].index:(u.terms[e].index=t,this)},type:function(t){return o(),null==t?u.terms[e].type:(u.terms[e].type=t,this)},id:function(t){return o(),null==t?u.terms[e].id:(u.terms[e].id=t,this)},path:function(t){return o(),null==t?u.terms[e].path:(u.terms[e].path=t,this)},routing:function(t){return o(),null==t?u.terms[e].routing:(u.terms[e].routing=t,this)},cacheLookup:function(t){return o(),null==t?u.terms[e].cache:(u.terms[e].cache=t,this)},execution:function(e){return null==e?u.terms.execution:("plain"!==(e=e.toLowerCase())&&"bool"!==e&&"bool_nocache"!==e&&"and"!==e&&"and_nocache"!==e&&"or"!==e&&"or_nocache"!==e||(u.terms.execution=e),this)}})},N.TypeFilter=function(e){let t=N.FilterMixin("type"),r=t.toJSON();return r.type.value=e,n(t,{type:function(e){return null==e?r.type.value:(r.type.value=e,this)}})},N.BoolQuery=function(){let e=N.QueryMixin("bool"),t=e.toJSON();return n(e,{must:function(e){let n,r;if(null==t.bool.must&&(t.bool.must=[]),null==e)return t.bool.must;if(f(e))t.bool.must.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be a Query or array of Queries");for(t.bool.must=[],n=0,r=e.length;n<r;n++){if(!f(e[n]))throw new TypeError("Argument must be an array of Queries");t.bool.must.push(e[n].toJSON())}}return this},mustNot:function(e){let n,r;if(null==t.bool.must_not&&(t.bool.must_not=[]),null==e)return t.bool.must_not;if(f(e))t.bool.must_not.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be a Query or array of Queries");for(t.bool.must_not=[],n=0,r=e.length;n<r;n++){if(!f(e[n]))throw new TypeError("Argument must be an array of Queries");t.bool.must_not.push(e[n].toJSON())}}return this},should:function(e){let n,r;if(null==t.bool.should&&(t.bool.should=[]),null==e)return t.bool.should;if(f(e))t.bool.should.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be a Query or array of Queries");for(t.bool.should=[],n=0,r=e.length;n<r;n++){if(!f(e[n]))throw new TypeError("Argument must be an array of Queries");t.bool.should.push(e[n].toJSON())}}return this},filter:function(e){let n,r;if(null==t.bool.filter&&(t.bool.filter=[]),null==e)return t.bool.filter;if(m(e))t.bool.filter.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be a Filter or array of Filters");for(t.bool.filter=[],n=0,r=e.length;n<r;n++){if(!m(e[n]))throw new TypeError("Argument must be an array of Filters");t.bool.filter.push(e[n].toJSON())}}return this},filterQuery:function(e){let n,r;if(null==t.bool.filter&&(t.bool.filter=[]),null==e)return t.bool.filter;if(f(e))t.bool.filter.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be a Query or array of Queries");for(t.bool.filter=[],n=0,r=e.length;n<r;n++){if(!f(e[n]))throw new TypeError("Argument must be an array of Queries");t.bool.filter.push(e[n].toJSON())}}return this},adjustPureNegative:function(e){return null==e?t.bool.adjust_pure_negative:(t.bool.adjust_pure_negative=e,this)},disableCoord:function(e){return null==e?t.bool.disable_coord:(t.bool.disable_coord=e,this)},minimumShouldMatch:function(e){return null==e?t.bool.minimum_should_match:(t.bool.minimum_should_match=e,this)}})},N.BoostingQuery=function(e,t,r){if(!f(e)||!f(t))throw new TypeError("Arguments must be Queries");let i=N.QueryMixin("boosting"),u=i.toJSON();return u.boosting.positive=e.toJSON(),u.boosting.negative=t.toJSON(),u.boosting.negative_boost=r,n(i,{positive:function(e){if(null==e)return u.boosting.positive;if(!f(e))throw new TypeError("Argument must be a Query");return u.boosting.positive=e.toJSON(),this},negative:function(e){if(null==e)return u.boosting.negative;if(!f(e))throw new TypeError("Argument must be a Query");return u.boosting.negative=e.toJSON(),this},negativeBoost:function(e){return null==e?u.boosting.negative_boost:(u.boosting.negative_boost=e,this)}})},N.CommonTermsQuery=function(e,t){let r=N.QueryMixin("common"),i=r.toJSON();return null==e&&(e="no_field_set"),i.common[e]={},null!=t&&(i.common[e].query=t),n(r,{field:function(t){let n=i.common[e];return null==t?e:(delete i.common[e],e=t,i.common[t]=n,this)},query:function(t){return null==t?i.common[e].query:(i.common[e].query=t,this)},analyzer:function(t){return null==t?i.common[e].analyzer:(i.common[e].analyzer=t,this)},disableCoord:function(t){return null==t?i.common[e].disable_coord:(i.common[e].disable_coord=t,this)},cutoffFrequency:function(t){return null==t?i.common[e].cutoff_frequency:(i.common[e].cutoff_frequency=t,this)},highFreqOperator:function(t){return null==t?i.common[e].high_freq_operator:("and"!==(t=t.toLowerCase())&&"or"!==t||(i.common[e].high_freq_operator=t),this)},lowFreqOperator:function(t){return null==t?i.common[e].low_freq_operator:("and"!==(t=t.toLowerCase())&&"or"!==t||(i.common[e].low_freq_operator=t),this)},minimumShouldMatch:function(t){return null==t?i.common[e].minimum_should_match.low_freq:(null==i.common[e].minimum_should_match&&(i.common[e].minimum_should_match={}),i.common[e].minimum_should_match.low_freq=t,this)},minimumShouldMatchLowFreq:function(e){return this.minimumShouldMatch(e)},minimumShouldMatchHighFreq:function(t){return null==t?i.common[e].minimum_should_match.high_freq:(null==i.common[e].minimum_should_match&&(i.common[e].minimum_should_match={}),i.common[e].minimum_should_match.high_freq=t,this)},boost:function(t){return null==t?i.common[e].boost:(i.common[e].boost=t,this)}})},N.ConstantScoreQuery=function(){let e=N.QueryMixin("constant_score"),t=e.toJSON();return n(e,{query:function(e){if(null==e)return t.constant_score.query;if(!f(e))throw new TypeError("Argument must be a Query");return t.constant_score.query=e.toJSON(),this},filter:function(e){if(null==e)return t.constant_score.filter;if(!m(e))throw new TypeError("Argument must be a Filter");return t.constant_score.filter=e.toJSON(),this},cache:function(e){return null==e?t.constant_score._cache:(t.constant_score._cache=e,this)},cacheKey:function(e){return null==e?t.constant_score._cache_key:(t.constant_score._cache_key=e,this)}})},N.DisMaxQuery=function(){let e=N.QueryMixin("dis_max"),t=e.toJSON();return n(e,{queries:function(e){let n,r;if(null==e)return t.dis_max.queries;if(null==t.dis_max.queries&&(t.dis_max.queries=[]),f(e))t.dis_max.queries.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be a Query or array of Queries");for(t.dis_max.queries=[],n=0,r=e.length;n<r;n++){if(!f(e[n]))throw new TypeError("Argument must be array of Queries");t.dis_max.queries.push(e[n].toJSON())}}return this},tieBreaker:function(e){return null==e?t.dis_max.tie_breaker:(t.dis_max.tie_breaker=e,this)}})},N.ExistsQuery=function(e){let t=N.QueryMixin("exists"),r=t.toJSON();return r.exists.field=e,n(t,{field:function(e){return null==e?r.exists.field:(r.exists.field=e,this)}})},N.FieldMaskingSpanQuery=function(e,t){if(!f(e))throw new TypeError("Argument must be a SpanQuery");let r=N.QueryMixin("field_masking_span"),i=r.toJSON();return i.field_masking_span.query=e.toJSON(),i.field_masking_span.field=t,n(r,{query:function(e){if(null==e)return i.field_masking_span.query;if(!f(e))throw new TypeError("Argument must be a SpanQuery");return i.field_masking_span.query=e.toJSON(),this},field:function(e){return null==e?i.field_masking_span.field:(i.field_masking_span.field=e,this)}})},N.FilteredQuery=function(e,t){if(!f(e))throw new TypeError("Argument must be a Query");if(null!=t&&!m(t))throw new TypeError("Argument must be a Filter");let r=N.QueryMixin("filtered"),i=r.toJSON();return i.filtered.query=e.toJSON(),null!=t&&(i.filtered.filter=t.toJSON()),n(r,{query:function(e){if(null==e)return i.filtered.query;if(!f(e))throw new TypeError("Argument must be a Query");return i.filtered.query=e.toJSON(),this},filter:function(e){if(null==e)return i.filter;if(!m(e))throw new TypeError("Argument must be a Filter");return i.filter=e.toJSON(),this},strategy:function(e){return null==e?i.filtered.strategy:("query_first"!==(e=e.toLowerCase())&&"random_access_always"!==e&&"leap_frog"!==e&&"leap_frog_filter_first"!==e&&0!==e.indexOf("random_access_")||(i.filtered.strategy=e),this)},cache:function(e){return null==e?i.filtered._cache:(i.filtered._cache=e,this)},cacheKey:function(e){return null==e?i.filtered._cache_key:(i.filtered._cache_key=e,this)}})},N.BoostFactorScoreFunction=function(e){let t=N.ScoreFunctionMixin("boost_factor"),r=t.toJSON();return r.boost_factor=e,n(t,{boost:function(e){return null==e?r.boost_factor:(r.boost_factor=e,this)}})},N.DecayScoreFunction=function(e){let t="gauss",r=N.ScoreFunctionMixin(t),i=r.toJSON(),u=function(e){let n;t!==e&&(n=i[t],delete i[t],i[t=e]=n)};return i[t][e]={},n(r,{linear:function(){u("linear")},exp:function(){u("exp")},gauss:function(){u("gauss")},field:function(n){let r=i[t][e];return null==n?e:(delete i[t][e],e=n,i[t][e]=r,this)},scale:function(n){return null==n?i[t][e].scale:(i[t][e].scale=n,this)},origin:function(n){if(null==n)return i[t][e].origin;if(p(n))i[t][e].origin=n.toJSON();else{if(c(n))throw new TypeError("origin must be a GeoPoint or native type");i[t][e].origin=n}return this},decay:function(n){return null==n?i[t][e].decay:(i[t][e].decay=n,this)},offset:function(n){return null==n?i[t][e].offset:(i[t][e].offset=n,this)}})},N.FieldValueScoreFunction=function(){let e=N.ScoreFunctionMixin("field_value_factor"),t=e.toJSON();return n(e,{field:function(e){return null==e?t.field_value_factor.field:(t.field_value_factor.field=e,this)},factor:function(e){return null==e?t.field_value_factor.factor:(t.field_value_factor.factor=e,this)},modifier:function(e){return null==e?t.field_value_factor.modifier:(t.field_value_factor.modifier=e,this)}})},N.RandomScoreFunction=function(){let e=N.ScoreFunctionMixin("random_score"),t=e.toJSON();return n(e,{seed:function(e){return null==e?t.random_score.seed:(t.random_score.seed=e,this)}})},N.ScriptScoreFunction=function(){let e=N.ScoreFunctionMixin("script_score"),t=e.toJSON();return n(e,{script:function(e){return null==e?t.script_score.script:(t.script_score.script=e,this)},scriptId:function(e){return null==e?t.script_score.script_id:(t.script_score.script_id=e,this)},lang:function(e){return null==e?t.script_score.lang:(t.script_score.lang=e,this)},params:function(e){return null==e?t.script_score.params:(t.script_score.params=e,this)}})},N.FunctionScoreQuery=function(){let e=N.QueryMixin("function_score"),t=e.toJSON();return n(e,{query:function(e){if(null==e)return t.function_score.query;if(!f(e))throw new TypeError("Argument must be a Query");return t.function_score.query=e.toJSON(),this},filter:function(e){if(null==e)return t.function_score.filter;if(!m(e))throw new TypeError("Argument must be a Filter");return t.function_score.filter=e.toJSON(),this},scoreMode:function(e){return null==e?t.function_score.score_mode:("avg"!==(e=e.toLowerCase())&&"max"!==e&&"min"!==e&&"sum"!==e&&"multiply"!==e&&"first"!==e||(t.function_score.score_mode=e),this)},boostMode:function(e){return null==e?t.function_score.boost_mode:("multiply"!==(e=e.toLowerCase())&&"replace"!==e&&"sum"!==e&&"avg"!==e&&"max"!==e&&"min"!==e||(t.function_score.boost_mode=e),this)},boost:function(e){return null==e?t.function_score.boost:(t.function_score.boost=e,this)},function:function(e){if(null==t.function_score.functions&&(t.function_score.functions=[]),null==e)return t.function_score.functions;if(!z(e))throw new TypeError("Argument must be a ScoreFunction");return t.function_score.functions.push(e.toJSON()),this},functions:function(e){let n,r;if(null==e)return t.function_score.functions;if(!i(e))throw new TypeError("Argument must be an array of ScoreFunctions");for(t.function_score.functions=[],n=0,r=e.length;n<r;n++){if(!z(e[n]))throw new TypeError("Argument must be an array of ScoreFunctions");t.function_score.functions.push(e[n].toJSON())}return this}})},N.FuzzyLikeThisFieldQuery=function(e,t){let r=N.QueryMixin("flt_field"),i=r.toJSON();return i.flt_field[e]={like_text:t},n(r,{field:function(t){let n=i.flt_field[e];return null==t?e:(delete i.flt_field[e],e=t,i.flt_field[t]=n,this)},likeText:function(t){return null==t?i.flt_field[e].like_text:(i.flt_field[e].like_text=t,this)},ignoreTf:function(t){return null==t?i.flt_field[e].ignore_tf:(i.flt_field[e].ignore_tf=t,this)},maxQueryTerms:function(t){return null==t?i.flt_field[e].max_query_terms:(i.flt_field[e].max_query_terms=t,this)},minSimilarity:function(t){return null==t?i.flt_field[e].min_similarity:(i.flt_field[e].min_similarity=t,this)},prefixLength:function(t){return null==t?i.flt_field[e].prefix_length:(i.flt_field[e].prefix_length=t,this)},analyzer:function(t){return null==t?i.flt_field[e].analyzer:(i.flt_field[e].analyzer=t,this)},failOnUnsupportedField:function(t){return null==t?i.flt_field[e].fail_on_unsupported_field:(i.flt_field[e].fail_on_unsupported_field=t,this)},boost:function(t){return null==t?i.flt_field[e].boost:(i.flt_field[e].boost=t,this)}})},N.FuzzyLikeThisQuery=function(e){let t=N.QueryMixin("flt"),r=t.toJSON();return r.flt.like_text=e,n(t,{fields:function(e){if(null==r.flt.fields&&(r.flt.fields=[]),null==e)return r.flt.fields;if(o(e))r.flt.fields.push(e);else{if(!i(e))throw new TypeError("Argument must be a string or array");r.flt.fields=e}return this},likeText:function(e){return null==e?r.flt.like_text:(r.flt.like_text=e,this)},ignoreTf:function(e){return null==e?r.flt.ignore_tf:(r.flt.ignore_tf=e,this)},maxQueryTerms:function(e){return null==e?r.flt.max_query_terms:(r.flt.max_query_terms=e,this)},minSimilarity:function(e){return null==e?r.flt.min_similarity:(r.flt.min_similarity=e,this)},prefixLength:function(e){return null==e?r.flt.prefix_length:(r.flt.prefix_length=e,this)},analyzer:function(e){return null==e?r.flt.analyzer:(r.flt.analyzer=e,this)},failOnUnsupportedField:function(e){return null==e?r.flt.fail_on_unsupported_field:(r.flt.fail_on_unsupported_field=e,this)}})},N.FuzzyQuery=function(e,t){let r=N.QueryMixin("fuzzy"),i=r.toJSON();return i.fuzzy[e]={value:t},n(r,{field:function(t){let n=i.fuzzy[e];return null==t?e:(delete i.fuzzy[e],e=t,i.fuzzy[t]=n,this)},value:function(t){return null==t?i.fuzzy[e].value:(i.fuzzy[e].value=t,this)},transpositions:function(t){return null==t?i.fuzzy[e].transpositions:(i.fuzzy[e].transpositions=t,this)},maxExpansions:function(t){return null==t?i.fuzzy[e].max_expansions:(i.fuzzy[e].max_expansions=t,this)},minSimilarity:function(t){return null==t?i.fuzzy[e].min_similarity:(i.fuzzy[e].min_similarity=t,this)},prefixLength:function(t){return null==t?i.fuzzy[e].prefix_length:(i.fuzzy[e].prefix_length=t,this)},rewrite:function(t){return null==t?i.fuzzy[e].rewrite:("constant_score_auto"!==(t=t.toLowerCase())&&"scoring_boolean"!==t&&"constant_score_boolean"!==t&&"constant_score_filter"!==t&&0!==t.indexOf("top_terms_boost_")&&0!==t.indexOf("top_terms_")||(i.fuzzy[e].rewrite=t),this)},boost:function(t){return null==t?i.fuzzy[e].boost:(i.fuzzy[e].boost=t,this)}})},N.GeoShapeQuery=function(e){let t=N.QueryMixin("geo_shape"),r=t.toJSON();return r.geo_shape[e]={},n(t,{field:function(t){let n=r.geo_shape[e];return null==t?e:(delete r.geo_shape[e],e=t,r.geo_shape[t]=n,this)},shape:function(t){return null==t?r.geo_shape[e].shape:(null!=r.geo_shape[e].indexed_shape&&delete r.geo_shape[e].indexed_shape,r.geo_shape[e].shape=t.toJSON(),this)},indexedShape:function(t){return null==t?r.geo_shape[e].indexed_shape:(null!=r.geo_shape[e].shape&&delete r.geo_shape[e].shape,r.geo_shape[e].indexed_shape=t.toJSON(),this)},relation:function(t){return null==t?r.geo_shape[e].relation:("intersects"!==(t=t.toLowerCase())&&"disjoint"!==t&&"within"!==t||(r.geo_shape[e].relation=t),this)},strategy:function(t){return null==t?r.geo_shape[e].strategy:("recursive"!==(t=t.toLowerCase())&&"term"!==t||(r.geo_shape[e].strategy=t),this)},boost:function(t){return null==t?r.geo_shape[e].boost:(r.geo_shape[e].boost=t,this)}})},N.HasChildQuery=function(e,t){if(!f(e))throw new TypeError("Argument must be a valid Query");let r=N.QueryMixin("has_child"),i=r.toJSON();return i.has_child.query=e.toJSON(),i.has_child.type=t,n(r,{query:function(e){if(null==e)return i.has_child.query;if(!f(e))throw new TypeError("Argument must be a valid Query");return i.has_child.query=e.toJSON(),this},type:function(e){return null==e?i.has_child.type:(i.has_child.type=e,this)},scope:function(){return this},scoreType:function(e){return null==e?i.has_child.score_type:("none"!==(e=e.toLowerCase())&&"max"!==e&&"sum"!==e&&"avg"!==e||(i.has_child.score_type=e),this)},scoreMode:function(e){return null==e?i.has_child.score_mode:("none"!==(e=e.toLowerCase())&&"max"!==e&&"sum"!==e&&"avg"!==e||(i.has_child.score_mode=e),this)},shortCircuitCutoff:function(e){return null==e?i.has_child.short_circuit_cutoff:(i.has_child.short_circuit_cutoff=e,this)}})},N.HasParentQuery=function(e,t){if(!f(e))throw new TypeError("Argument must be a Query");let r=N.QueryMixin("has_parent"),i=r.toJSON();return i.has_parent.query=e.toJSON(),i.has_parent.parent_type=t,n(r,{query:function(e){if(null==e)return i.has_parent.query;if(!f(e))throw new TypeError("Argument must be a Query");return i.has_parent.query=e.toJSON(),this},parentType:function(e){return null==e?i.has_parent.parent_type:(i.has_parent.parent_type=e,this)},scope:function(){return this},scoreType:function(e){return null==e?i.has_parent.score_type:("none"!==(e=e.toLowerCase())&&"score"!==e||(i.has_parent.score_type=e),this)},scoreMode:function(e){return null==e?i.has_parent.score_mode:("none"!==(e=e.toLowerCase())&&"score"!==e||(i.has_parent.score_mode=e),this)}})},N.IdsQuery=function(e){let t=N.QueryMixin("ids"),r=t.toJSON();if(o(e))r.ids.values=[e];else{if(!i(e))throw new TypeError("Argument must be string or array");r.ids.values=e}return n(t,{values:function(e){if(null==e)return r.ids.values;if(o(e))r.ids.values.push(e);else{if(!i(e))throw new TypeError("Argument must be string or array");r.ids.values=e}return this},type:function(e){if(null==r.ids.type&&(r.ids.type=[]),null==e)return r.ids.type;if(o(e))r.ids.type.push(e);else{if(!i(e))throw new TypeError("Argument must be string or array");r.ids.type=e}return this}})},N.IndicesQuery=function(e,t){if(!f(e))throw new TypeError("Argument must be a Query");let r=N.QueryMixin("indices"),u=r.toJSON();if(u.indices.query=e.toJSON(),o(t))u.indices.indices=[t];else{if(!i(t))throw new TypeError("Argument must be a string or array");u.indices.indices=t}return n(r,{indices:function(e){if(null==e)return u.indices.indices;if(o(e))u.indices.indices.push(e);else{if(!i(e))throw new TypeError("Argument must be a string or array");u.indices.indices=e}return this},query:function(e){if(null==e)return u.indices.query;if(!f(e))throw new TypeError("Argument must be a Query");return u.indices.query=e.toJSON(),this},noMatchQuery:function(e){if(null==e)return u.indices.no_match_query;if(o(e))"none"!==(e=e.toLowerCase())&&"all"!==e||(u.indices.no_match_query=e);else{if(!f(e))throw new TypeError("Argument must be string or Query");u.indices.no_match_query=e.toJSON()}return this}})},N.MatchAllQuery=function(){return N.QueryMixin("match_all")},N.MatchQuery=function(e,t){let r=N.QueryMixin("match"),i=r.toJSON();return i.match[e]={query:t},n(r,{query:function(t){return null==t?i.match[e].query:(i.match[e].query=t,this)},type:function(t){return null==t?i.match[e].type:("boolean"!==(t=t.toLowerCase())&&"phrase"!==t&&"phrase_prefix"!==t||(i.match[e].type=t),this)},fuzziness:function(t){return null==t?i.match[e].fuzziness:(i.match[e].fuzziness=t,this)},cutoffFrequency:function(t){return null==t?i.match[e].cutoff_frequency:(i.match[e].cutoff_frequency=t,this)},prefixLength:function(t){return null==t?i.match[e].prefix_length:(i.match[e].prefix_length=t,this)},maxExpansions:function(t){return null==t?i.match[e].max_expansions:(i.match[e].max_expansions=t,this)},operator:function(t){return null==t?i.match[e].operator:("and"!==(t=t.toLowerCase())&&"or"!==t||(i.match[e].operator=t),this)},slop:function(t){return null==t?i.match[e].slop:(i.match[e].slop=t,this)},analyzer:function(t){return null==t?i.match[e].analyzer:(i.match[e].analyzer=t,this)},minimumShouldMatch:function(t){return null==t?i.match[e].minimum_should_match:(i.match[e].minimum_should_match=t,this)},rewrite:function(t){return null==t?i.match[e].rewrite:("constant_score_auto"!==(t=t.toLowerCase())&&"scoring_boolean"!==t&&"constant_score_boolean"!==t&&"constant_score_filter"!==t&&0!==t.indexOf("top_terms_boost_")&&0!==t.indexOf("top_terms_")||(i.match[e].rewrite=t),this)},fuzzyRewrite:function(t){return null==t?i.match[e].fuzzy_rewrite:("constant_score_auto"!==(t=t.toLowerCase())&&"scoring_boolean"!==t&&"constant_score_boolean"!==t&&"constant_score_filter"!==t&&0!==t.indexOf("top_terms_boost_")&&0!==t.indexOf("top_terms_")||(i.match[e].fuzzy_rewrite=t),this)},fuzzyTranspositions:function(t){return null==t?i.match[e].fuzzy_transpositions:(i.match[e].fuzzy_transpositions=t,this)},lenient:function(t){return null==t?i.match[e].lenient:(i.match[e].lenient=t,this)},zeroTermsQuery:function(t){return null==t?i.match[e].zero_terms_query:("all"!==(t=t.toLowerCase())&&"none"!==t||(i.match[e].zero_terms_query=t),this)},boost:function(t){return null==t?i.match[e].boost:(i.match[e].boost=t,this)}})},N.MoreLikeThisFieldQuery=function(e,t){let r=N.QueryMixin("mlt_field"),i=r.toJSON();return i.mlt_field[e]={like_text:t},n(r,{field:function(t){let n=i.mlt_field[e];return null==t?e:(delete i.mlt_field[e],e=t,i.mlt_field[t]=n,this)},likeText:function(t){return null==t?i.mlt_field[e].like_text:(i.mlt_field[e].like_text=t,this)},percentTermsToMatch:function(t){return null==t?i.mlt_field[e].percent_terms_to_match:(i.mlt_field[e].percent_terms_to_match=t,this)},minTermFreq:function(t){return null==t?i.mlt_field[e].min_term_freq:(i.mlt_field[e].min_term_freq=t,this)},maxQueryTerms:function(t){return null==t?i.mlt_field[e].max_query_terms:(i.mlt_field[e].max_query_terms=t,this)},stopWords:function(t){return null==t?i.mlt_field[e].stop_words:(i.mlt_field[e].stop_words=t,this)},minDocFreq:function(t){return null==t?i.mlt_field[e].min_doc_freq:(i.mlt_field[e].min_doc_freq=t,this)},maxDocFreq:function(t){return null==t?i.mlt_field[e].max_doc_freq:(i.mlt_field[e].max_doc_freq=t,this)},minWordLen:function(t){return null==t?i.mlt_field[e].min_word_len:(i.mlt_field[e].min_word_len=t,this)},maxWordLen:function(t){return null==t?i.mlt_field[e].max_word_len:(i.mlt_field[e].max_word_len=t,this)},analyzer:function(t){return null==t?i.mlt_field[e].analyzer:(i.mlt_field[e].analyzer=t,this)},boostTerms:function(t){return null==t?i.mlt_field[e].boost_terms:(i.mlt_field[e].boost_terms=t,this)},failOnUnsupportedField:function(t){return null==t?i.mlt_field[e].fail_on_unsupported_field:(i.mlt_field[e].fail_on_unsupported_field=t,this)},boost:function(t){return null==t?i.mlt_field[e].boost:(i.mlt_field[e].boost=t,this)}})},N.MoreLikeThisQuery=function(e,t){let r=N.QueryMixin("mlt"),u=r.toJSON();if(u.mlt.like_text=t,u.mlt.fields=[],o(e))u.mlt.fields.push(e);else{if(!i(e))throw new TypeError("Argument must be string or array");u.mlt.fields=e}return n(r,{fields:function(e){if(null==e)return u.mlt.fields;if(o(e))u.mlt.fields.push(e);else{if(!i(e))throw new TypeError("Argument must be a string or array");u.mlt.fields=e}return this},likeText:function(e){return null==e?u.mlt.like_text:(u.mlt.like_text=e,this)},percentTermsToMatch:function(e){return null==e?u.mlt.percent_terms_to_match:(u.mlt.percent_terms_to_match=e,this)},minTermFreq:function(e){return null==e?u.mlt.min_term_freq:(u.mlt.min_term_freq=e,this)},maxQueryTerms:function(e){return null==e?u.mlt.max_query_terms:(u.mlt.max_query_terms=e,this)},stopWords:function(e){return null==e?u.mlt.stop_words:(u.mlt.stop_words=e,this)},minDocFreq:function(e){return null==e?u.mlt.min_doc_freq:(u.mlt.min_doc_freq=e,this)},maxDocFreq:function(e){return null==e?u.mlt.max_doc_freq:(u.mlt.max_doc_freq=e,this)},minWordLen:function(e){return null==e?u.mlt.min_word_len:(u.mlt.min_word_len=e,this)},maxWordLen:function(e){return null==e?u.mlt.max_word_len:(u.mlt.max_word_len=e,this)},analyzer:function(e){return null==e?u.mlt.analyzer:(u.mlt.analyzer=e,this)},boostTerms:function(e){return null==e?u.mlt.boost_terms:(u.mlt.boost_terms=e,this)},failOnUnsupportedField:function(e){return null==e?u.mlt.fail_on_unsupported_field:(u.mlt.fail_on_unsupported_field=e,this)}})},N.MultiMatchQuery=function(e,t){let r=N.QueryMixin("multi_match"),u=r.toJSON();if(u.multi_match.query=t,u.multi_match.fields=[],o(e))u.multi_match.fields.push(e);else{if(!i(e))throw new TypeError("Argument must be string or array");u.multi_match.fields=e}return n(r,{fields:function(e){if(null==e)return u.multi_match.fields;if(o(e))u.multi_match.fields.push(e);else{if(!i(e))throw new TypeError("Argument must be string or array");u.multi_match.fields=e}return this},useDisMax:function(e){return null==e?u.multi_match.use_dis_max:(u.multi_match.use_dis_max=e,this)},tieBreaker:function(e){return null==e?u.multi_match.tie_breaker:(u.multi_match.tie_breaker=e,this)},cutoffFrequency:function(e){return null==e?u.multi_match.cutoff_frequency:(u.multi_match.cutoff_frequency=e,this)},minimumShouldMatch:function(e){return null==e?u.multi_match.minimum_should_match:(u.multi_match.minimum_should_match=e,this)},rewrite:function(e){return null==e?u.multi_match.rewrite:("constant_score_auto"!==(e=e.toLowerCase())&&"scoring_boolean"!==e&&"constant_score_boolean"!==e&&"constant_score_filter"!==e&&0!==e.indexOf("top_terms_boost_")&&0!==e.indexOf("top_terms_")||(u.multi_match.rewrite=e),this)},fuzzyRewrite:function(e){return null==e?u.multi_match.fuzzy_rewrite:("constant_score_auto"!==(e=e.toLowerCase())&&"scoring_boolean"!==e&&"constant_score_boolean"!==e&&"constant_score_filter"!==e&&0!==e.indexOf("top_terms_boost_")&&0!==e.indexOf("top_terms_")||(u.multi_match.fuzzy_rewrite=e),this)},lenient:function(e){return null==e?u.multi_match.lenient:(u.multi_match.lenient=e,this)},query:function(e){return null==e?u.multi_match.query:(u.multi_match.query=e,this)},type:function(e){return null==e?u.multi_match.type:("boolean"!==(e=e.toLowerCase())&&"phrase"!==e&&"phrase_prefix"!==e||(u.multi_match.type=e),this)},fuzziness:function(e){return null==e?u.multi_match.fuzziness:(u.multi_match.fuzziness=e,this)},prefixLength:function(e){return null==e?u.multi_match.prefix_length:(u.multi_match.prefix_length=e,this)},maxExpansions:function(e){return null==e?u.multi_match.max_expansions:(u.multi_match.max_expansions=e,this)},operator:function(e){return null==e?u.multi_match.operator:("and"!==(e=e.toLowerCase())&&"or"!==e||(u.multi_match.operator=e),this)},slop:function(e){return null==e?u.multi_match.slop:(u.multi_match.slop=e,this)},analyzer:function(e){return null==e?u.multi_match.analyzer:(u.multi_match.analyzer=e,this)},zeroTermsQuery:function(e){return null==e?u.multi_match.zero_terms_query:("all"!==(e=e.toLowerCase())&&"none"!==e||(u.multi_match.zero_terms_query=e),this)}})},N.NestedQuery=function(e){let t=N.QueryMixin("nested"),r=t.toJSON();return r.nested.path=e,n(t,{path:function(e){return null==e?r.nested.path:(r.nested.path=e,this)},query:function(e){if(null==e)return r.nested.query;if(!f(e))throw new TypeError("Argument must be a Query");return r.nested.query=e.toJSON(),this},filter:function(e){if(null==e)return r.nested.filter;if(!m(e))throw new TypeError("Argument must be a Filter");return r.nested.filter=e.toJSON(),this},scoreMode:function(e){return null==e?r.nested.score_mode:("avg"!==(e=e.toLowerCase())&&"total"!==e&&"max"!==e&&"none"!==e&&"sum"!==e||(r.nested.score_mode=e),this)},scope:function(){return this}})},N.PrefixQuery=function(e,t){let r=N.QueryMixin("prefix"),i=r.toJSON();return i.prefix[e]={value:t},n(r,{field:function(t){let n=i.prefix[e];return null==t?e:(delete i.prefix[e],e=t,i.prefix[t]=n,this)},value:function(t){return null==t?i.prefix[e].value:(i.prefix[e].value=t,this)},rewrite:function(t){return null==t?i.prefix[e].rewrite:("constant_score_auto"!==(t=t.toLowerCase())&&"scoring_boolean"!==t&&"constant_score_boolean"!==t&&"constant_score_filter"!==t&&0!==t.indexOf("top_terms_boost_")&&0!==t.indexOf("top_terms_")||(i.prefix[e].rewrite=t),this)},boost:function(t){return null==t?i.prefix[e].boost:(i.prefix[e].boost=t,this)}})},N.QueryStringQuery=function(e){let t=N.QueryMixin("query_string"),r=t.toJSON();return r.query_string.query=e,n(t,{query:function(e){return null==e?r.query_string.query:(r.query_string.query=e,this)},defaultField:function(e){return null==e?r.query_string.default_field:(r.query_string.default_field=e,this)},fields:function(e){if(null==r.query_string.fields&&(r.query_string.fields=[]),null==e)return r.query_string.fields;if(o(e))r.query_string.fields.push(e);else{if(!i(e))throw new TypeError("Argument must be a string or array");r.query_string.fields=e}return this},useDisMax:function(e){return null==e?r.query_string.use_dis_max:(r.query_string.use_dis_max=e,this)},defaultOperator:function(e){return null==e?r.query_string.default_operator:("AND"!==(e=e.toUpperCase())&&"OR"!==e||(r.query_string.default_operator=e),this)},analyzer:function(e){return null==e?r.query_string.analyzer:(r.query_string.analyzer=e,this)},quoteAnalyzer:function(e){return null==e?r.query_string.quote_analyzer:(r.query_string.quote_analyzer=e,this)},allowLeadingWildcard:function(e){return null==e?r.query_string.allow_leading_wildcard:(r.query_string.allow_leading_wildcard=e,this)},lowercaseExpandedTerms:function(e){return null==e?r.query_string.lowercase_expanded_terms:(r.query_string.lowercase_expanded_terms=e,this)},enablePositionIncrements:function(e){return null==e?r.query_string.enable_position_increments:(r.query_string.enable_position_increments=e,this)},fuzzyPrefixLength:function(e){return null==e?r.query_string.fuzzy_prefix_length:(r.query_string.fuzzy_prefix_length=e,this)},fuzzyMinSim:function(e){return null==e?r.query_string.fuzzy_min_sim:(r.query_string.fuzzy_min_sim=e,this)},phraseSlop:function(e){return null==e?r.query_string.phrase_slop:(r.query_string.phrase_slop=e,this)},analyzeWildcard:function(e){return null==e?r.query_string.analyze_wildcard:(r.query_string.analyze_wildcard=e,this)},autoGeneratePhraseQueries:function(e){return null==e?r.query_string.auto_generate_phrase_queries:(r.query_string.auto_generate_phrase_queries=e,this)},minimumShouldMatch:function(e){return null==e?r.query_string.minimum_should_match:(r.query_string.minimum_should_match=e,this)},tieBreaker:function(e){return null==e?r.query_string.tie_breaker:(r.query_string.tie_breaker=e,this)},escape:function(e){return null==e?r.query_string.escape:(r.query_string.escape=e,this)},fuzzyMaxExpansions:function(e){return null==e?r.query_string.fuzzy_max_expansions:(r.query_string.fuzzy_max_expansions=e,this)},fuzzyRewrite:function(e){return null==e?r.query_string.fuzzy_rewrite:("constant_score_auto"!==(e=e.toLowerCase())&&"scoring_boolean"!==e&&"constant_score_boolean"!==e&&"constant_score_filter"!==e&&0!==e.indexOf("top_terms_boost_")&&0!==e.indexOf("top_terms_")||(r.query_string.fuzzy_rewrite=e),this)},rewrite:function(e){return null==e?r.query_string.rewrite:("constant_score_auto"!==(e=e.toLowerCase())&&"scoring_boolean"!==e&&"constant_score_boolean"!==e&&"constant_score_filter"!==e&&0!==e.indexOf("top_terms_boost_")&&0!==e.indexOf("top_terms_")||(r.query_string.rewrite=e),this)},quoteFieldSuffix:function(e){return null==e?r.query_string.quote_field_suffix:(r.query_string.quote_field_suffix=e,this)},lenient:function(e){return null==e?r.query_string.lenient:(r.query_string.lenient=e,this)}})},N.RangeQuery=function(e){let t=N.QueryMixin("range"),r=t.toJSON();return r.range[e]={},n(t,{field:function(t){let n=r.range[e];return null==t?e:(delete r.range[e],e=t,r.range[t]=n,this)},from:function(t){return null==t?r.range[e].from:(r.range[e].from=t,this)},to:function(t){return null==t?r.range[e].to:(r.range[e].to=t,this)},includeLower:function(t){return null==t?r.range[e].include_lower:(r.range[e].include_lower=t,this)},includeUpper:function(t){return null==t?r.range[e].include_upper:(r.range[e].include_upper=t,this)},gt:function(t){return null==t?r.range[e].gt:(r.range[e].gt=t,this)},gte:function(t){return null==t?r.range[e].gte:(r.range[e].gte=t,this)},lt:function(t){return null==t?r.range[e].lt:(r.range[e].lt=t,this)},lte:function(t){return null==t?r.range[e].lte:(r.range[e].lte=t,this)},boost:function(t){return null==t?r.range[e].boost:(r.range[e].boost=t,this)}})},N.RegexpQuery=function(e,t){let r=N.QueryMixin("regexp"),i=r.toJSON();return i.regexp[e]={value:t},n(r,{field:function(t){let n=i.regexp[e];return null==t?e:(delete i.regexp[e],e=t,i.regexp[t]=n,this)},value:function(t){return null==t?i.regexp[e].value:(i.regexp[e].value=t,this)},flags:function(t){return null==t?i.regexp[e].flags:(i.regexp[e].flags=t,this)},flagsValue:function(t){return null==t?i.regexp[e].flags_value:(i.regexp[e].flags_value=t,this)},rewrite:function(t){return null==t?i.regexp[e].rewrite:("constant_score_auto"!==(t=t.toLowerCase())&&"scoring_boolean"!==t&&"constant_score_boolean"!==t&&"constant_score_filter"!==t&&0!==t.indexOf("top_terms_boost_")&&0!==t.indexOf("top_terms_")||(i.regexp[e].rewrite=t),this)},boost:function(t){return null==t?i.regexp[e].boost:(i.regexp[e].boost=t,this)}})},N.SpanFirstQuery=function(e,t){if(!f(e))throw new TypeError("Argument must be a SpanQuery");let r=N.QueryMixin("span_first"),i=r.toJSON();return i.span_first.match=e.toJSON(),i.span_first.end=t,n(r,{match:function(e){if(null==e)return i.span_first.match;if(!f(e))throw new TypeError("Argument must be a SpanQuery");return i.span_first.match=e.toJSON(),this},end:function(e){return null==e?i.span_first.end:(i.span_first.end=e,this)}})},N.SpanMultiTermQuery=function(e){if(null!=e&&!f(e))throw new TypeError("Argument must be a MultiTermQuery");let t=N.QueryMixin("span_multi"),r=t.toJSON();return r.span_multi.match={},null!=e&&(r.span_multi.match=e.toJSON()),n(t,{match:function(e){if(null==e)return r.span_multi.match;if(!f(e))throw new TypeError("Argument must be a MultiTermQuery");return r.span_multi.match=e.toJSON(),this}})},N.SpanNearQuery=function(e,t){let r,u,o=N.QueryMixin("span_near"),l=o.toJSON();if(l.span_near.clauses=[],l.span_near.slop=t,f(e))l.span_near.clauses.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(r=0,u=e.length;r<u;r++){if(!f(e[r]))throw new TypeError("Argument must be array of SpanQueries");l.span_near.clauses.push(e[r].toJSON())}}return n(o,{clauses:function(e){let t,n;if(null==e)return l.span_near.clauses;if(f(e))l.span_near.clauses.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(l.span_near.clauses=[],t=0,n=e.length;t<n;t++){if(!f(e[t]))throw new TypeError("Argument must be array of SpanQueries");l.span_near.clauses.push(e[t].toJSON())}}return this},slop:function(e){return null==e?l.span_near.slop:(l.span_near.slop=e,this)},inOrder:function(e){return null==e?l.span_near.in_order:(l.span_near.in_order=e,this)},collectPayloads:function(e){return null==e?l.span_near.collect_payloads:(l.span_near.collect_payloads=e,this)}})},N.SpanNotQuery=function(e,t){if(!f(e)||!f(t))throw new TypeError("Argument must be a SpanQuery");let r=N.QueryMixin("span_not"),i=r.toJSON();return i.span_not.include=e.toJSON(),i.span_not.exclude=t.toJSON(),n(r,{include:function(e){if(null==e)return i.span_not.include;if(!f(e))throw new TypeError("Argument must be a SpanQuery");return i.span_not.include=e.toJSON(),this},exclude:function(e){if(null==e)return i.span_not.exclude;if(!f(e))throw new TypeError("Argument must be a SpanQuery");return i.span_not.exclude=e.toJSON(),this}})},N.SpanOrQuery=function(e){let t,r,u=N.QueryMixin("span_or"),o=u.toJSON();if(o.span_or.clauses=[],f(e))o.span_or.clauses.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(t=0,r=e.length;t<r;t++){if(!f(e[t]))throw new TypeError("Argument must be array of SpanQueries");o.span_or.clauses.push(e[t].toJSON())}}return n(u,{clauses:function(e){let t,n;if(null==e)return o.span_or.clauses;if(f(e))o.span_or.clauses.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(o.span_or.clauses=[],t=0,n=e.length;t<n;t++){if(!f(e[t]))throw new TypeError("Argument must be array of SpanQueries");o.span_or.clauses.push(e[t].toJSON())}}return this}})},N.SpanTermQuery=function(e,t){let r=N.QueryMixin("span_term"),i=r.toJSON();return i.span_term[e]={term:t},n(r,{field:function(t){let n=i.span_term[e];return null==t?e:(delete i.span_term[e],e=t,i.span_term[t]=n,this)},term:function(t){return null==t?i.span_term[e].term:(i.span_term[e].term=t,this)},boost:function(t){return null==t?i.span_term[e].boost:(i.span_term[e].boost=t,this)}})},N.TermQuery=function(e,t){let r=N.QueryMixin("term"),i=r.toJSON();return i.term[e]={term:t},n(r,{field:function(t){let n=i.term[e];return null==t?e:(delete i.term[e],e=t,i.term[t]=n,this)},term:function(t){return null==t?i.term[e].term:(i.term[e].term=t,this)},boost:function(t){return null==t?i.term[e].boost:(i.term[e].boost=t,this)}})},N.TermsQuery=function(e,t){let r=N.QueryMixin("terms"),u=r.toJSON();if(o(t))u.terms[e]=[t];else{if(!i(t))throw new TypeError("Argument must be string or array");u.terms[e]=t}return n(r,{field:function(t){let n=u.terms[e];return null==t?e:(delete u.terms[e],e=t,u.terms[t]=n,this)},terms:function(t){if(null==t)return u.terms[e];if(o(t))u.terms[e].push(t);else{if(!i(t))throw new TypeError("Argument must be string or array");u.terms[e]=t}return this},minimumShouldMatch:function(e){return null==e?u.terms.minimum_should_match:(u.terms.minimum_should_match=e,this)},disableCoord:function(e){return null==e?u.terms.disable_coord:(u.terms.disable_coord=e,this)}})},N.TopChildrenQuery=function(e,t){if(!f(e))throw new TypeError("Argument must be a Query");let r=N.QueryMixin("top_children"),i=r.toJSON();return i.top_children.query=e.toJSON(),i.top_children.type=t,n(r,{query:function(e){if(null==e)return i.top_children.query;if(!f(e))throw new TypeError("Argument must be a Query");return i.top_children.query=e.toJSON(),this},type:function(e){return null==e?i.top_children.type:(i.top_children.type=e,this)},scope:function(){return this},score:function(e){return null==e?i.top_children.score:("max"!==(e=e.toLowerCase())&&"sum"!==e&&"avg"!==e&&"total"!==e||(i.top_children.score=e),this)},scoreMode:function(e){return null==e?i.top_children.score_mode:("max"!==(e=e.toLowerCase())&&"sum"!==e&&"avg"!==e&&"total"!==e||(i.top_children.score_mode=e),this)},factor:function(e){return null==e?i.top_children.factor:(i.top_children.factor=e,this)},incrementalFactor:function(e){return null==e?i.top_children.incremental_factor:(i.top_children.incremental_factor=e,this)}})},N.WildcardQuery=function(e,t){let r=N.QueryMixin("wildcard"),i=r.toJSON();return i.wildcard[e]={value:t},n(r,{field:function(t){let n=i.wildcard[e];return null==t?e:(delete i.wildcard[e],e=t,i.wildcard[t]=n,this)},value:function(t){return null==t?i.wildcard[e].value:(i.wildcard[e].value=t,this)},rewrite:function(t){return null==t?i.wildcard[e].rewrite:("constant_score_auto"!==(t=t.toLowerCase())&&"scoring_boolean"!==t&&"constant_score_boolean"!==t&&"constant_score_filter"!==t&&0!==t.indexOf("top_terms_boost_")&&0!==t.indexOf("top_terms_")||(i.wildcard[e].rewrite=t),this)},boost:function(t){return null==t?i.wildcard[e].boost:(i.wildcard[e].boost=t,this)}})},N.GeoPoint=function(t){let n=[0,0];return null!=t&&i(t)&&2===t.length&&(n=[t[1],t[0]]),{properties:function(t){return null==t?n:(u(t)&&e(t,"lat")&&e(t,"lon")?n={lat:t.lat,lon:t.lon}:u(t)&&e(t,"geohash")&&(n={geohash:t.geohash}),this)},string:function(e){return null==e?n:(o(e)&&-1!==e.indexOf(",")&&(n=e),this)},geohash:function(e,t){return t=null!=t&&l(t)?t:12,null==e?n:(o(e)&&e.length===t&&(n=e),this)},array:function(e){return null==e?n:(i(e)&&2===e.length&&(n=[e[1],e[0]]),this)},_type:function(){return"geo point"},toJSON:function(){return n}}},N.Highlight=function(n){let r={fields:{}},l=function(t,n,i){null==t?r[n]=i:(e(r.fields,t)||(r.fields[t]={}),r.fields[t][n]=i)};return null!=n&&(o(n)?r.fields[n]={}:i(n)&&t(n,function(e){r.fields[e]={}})),{fields:function(n){if(null==n)return r.fields;o(n)?e(r.fields,n)||(r.fields[n]={}):i(n)&&t(n,function(t){e(r.fields,t)||(r.fields[t]={})})},preTags:function(e,t){return null===e&&null!=t?r.fields[t].pre_tags:null==e?r.pre_tags:(o(e)?l(t,"pre_tags",[e]):i(e)&&l(t,"pre_tags",e),this)},postTags:function(e,t){return null===e&&null!=t?r.fields[t].post_tags:null==e?r.post_tags:(o(e)?l(t,"post_tags",[e]):i(e)&&l(t,"post_tags",e),this)},order:function(e,t){return null===e&&null!=t?r.fields[t].order:null==e?r.order:("score"===(e=e.toLowerCase())&&l(t,"order",e),this)},tagsSchema:function(e){return null==e?r.tags_schema:("styled"===(e=e.toLowerCase())&&(r.tags_schema=e),this)},highlightFilter:function(e,t){return null===e&&null!=t?r.fields[t].highlight_filter:null==e?r.highlight_filter:(l(t,"highlight_filter",e),this)},fragmentSize:function(e,t){return null===e&&null!=t?r.fields[t].fragment_size:null==e?r.fragment_size:(l(t,"fragment_size",e),this)},numberOfFragments:function(e,t){return null===e&&null!=t?r.fields[t].number_of_fragments:null==e?r.number_of_fragments:(l(t,"number_of_fragments",e),this)},encoder:function(e){return null==e?r.encoder:("default"!==(e=e.toLowerCase())&&"html"!==e||(r.encoder=e),this)},requireFieldMatch:function(e,t){return null===e&&null!=t?r.fields[t].require_field_match:null==e?r.require_field_match:(l(t,"require_field_match",e),this)},boundaryMaxScan:function(e,t){return null===e&&null!=t?r.fields[t].boundary_max_scan:null==e?r.boundary_max_scan:(l(t,"boundary_max_scan",e),this)},boundaryChars:function(e,t){return null===e&&null!=t?r.fields[t].boundary_chars:null==e?r.boundary_chars:(l(t,"boundary_chars",e),this)},type:function(e,t){return null===e&&null!=t?r.fields[t].type:null==e?r.type:("fvh"!==(e=e.toLowerCase())&&"plain"!==e&&"postings"!==e||l(t,"type",e),this)},fragmenter:function(e,t){return null===e&&null!=t?r.fields[t].fragmenter:null==e?r.fragmenter:("simple"!==(e=e.toLowerCase())&&"span"!==e||l(t,"fragmenter",e),this)},options:function(e,t){if(null===e&&null!=t)return r.fields[t].options;if(null==e)return r.options;if(!u(e)||i(e)||c(e))throw new TypeError("Parameter must be an object");return l(t,"options",e),this},_type:function(){return"highlight"},toJSON:function(){return r}}},N.IndexedShape=function(e,t){let n={type:e,id:t};return{type:function(e){return null==e?n.type:(n.type=e,this)},id:function(e){return null==e?n.id:(n.id=e,this)},index:function(e){return null==e?n.index:(n.index=e,this)},shapeFieldName:function(e){return null==e?n.shape_field_name:(n.shape_field_name=e,this)},_type:function(){return"indexed shape"},toJSON:function(){return n}}},N.Request=function(){let t={};return{searchAfter:function(e){return null==e?t.search_after:(t.search_after=e,this)},sort:function(n){let r,u;if(e(t,"sort")||(t.sort=[]),0===arguments.length)return t.sort;if(1===arguments.length){let e=n;if(o(e))t.sort.push(e);else if(x(e))t.sort.push(e.toJSON());else{if(!i(e))throw new TypeError("Argument must be string, Sort, or array");for(t.sort=[],r=0,u=e.length;r<u;r++)if(o(e[r]))t.sort.push(e[r]);else{if(!x(e[r]))throw new TypeError("Invalid object in array");t.sort.push(e[r].toJSON())}}}else if(2===arguments.length){let e=n,r=arguments[1];if(o(e)&&o(r)&&("asc"===(r=r.toLowerCase())||"desc"===r)){let n={};n[e]={order:r},t.sort.push(n)}}return this},trackScores:function(e){return null==e?t.track_scores:(t.track_scores=e,this)},from:function(e){return null==e?t.from:(t.from=e,this)},size:function(e){return null==e?t.size:(t.size=e,this)},timeout:function(e){return null==e?t.timeout:(t.timeout=e,this)},fields:function(e){if(null==e)return t.fields;if(null==t.fields&&(t.fields=[]),o(e))t.fields.push(e);else{if(!i(e))throw new TypeError("Argument must be a string or an array");t.fields=e}return this},fieldDataFields:function(e){if(null==e)return t.fielddata_fields;if(null==t.fielddata_fields&&(t.fielddata_fields=[]),o(e))t.fielddata_fields.push(e);else{if(!i(e))throw new TypeError("Argument must be a string or an array");t.fielddata_fields=e}return this},source:function(e,n){if(null==e&&null==n)return t._source;if(!i(e)&&!o(e)&&!s(e))throw new TypeError("Argument includes must be a string, an array, or a boolean");if(null!=n&&!i(n)&&!o(n))throw new TypeError("Argument excludes must be a string or an array");return s(e)?t._source=e:(t._source={includes:e},null!=n&&(t._source.excludes=n)),this},rescore:function(e){if(null==e)return t.rescore;if(!h(e))throw new TypeError("Argument must be a Rescore");return t.rescore=e.toJSON(),this},query:function(e){if(null==e)return t.query;if(!f(e))throw new TypeError("Argument must be a Query");return t.query=e.toJSON(),this},facet:function(e){if(null==e)return t.facets;if(null==t.facets&&(t.facets={}),!_(e))throw new TypeError("Argument must be a Facet");return n(t.facets,e.toJSON()),this},aggregation:function(e){if(null==e)return t.aggs;if(null==t.aggs&&(t.aggs={}),!g(e))throw new TypeError("Argument must be an Aggregation");return n(t.aggs,e.toJSON()),this},agg:function(e){return this.aggregation(e)},filter:function(e){if(null==e)return t.filter;if(!m(e))throw new TypeError("Argument must be a Filter");return t.filter=e.toJSON(),this},highlight:function(e){if(null==e)return t.highlight;if(!b(e))throw new TypeError("Argument must be a Highlight object");return t.highlight=e.toJSON(),this},suggest:function(e){if(null==e)return t.suggest;if(null==t.suggest&&(t.suggest={}),o(e))t.suggest.text=e;else{if(!S(e))throw new TypeError("Argument must be a string or Suggest object");n(t.suggest,e.toJSON())}return this},scriptField:function(e){if(null==e)return t.script_fields;if(null==t.script_fields&&(t.script_fields={}),!d(e))throw new TypeError("Argument must be a ScriptField");return n(t.script_fields,e.toJSON()),this},indexBoost:function(e,n){return null==t.indices_boost&&(t.indices_boost={}),0===arguments.length?t.indices_boost:(t.indices_boost[e]=n,this)},explain:function(e){return null==e?t.explain:(t.explain=e,this)},version:function(e){return null==e?t.version:(t.version=e,this)},minScore:function(e){return null==e?t.min_score:(t.min_score=e,this)},_type:function(){return"request"},toJSON:function(){return t}}},N.Rescore=function(e,t){if(null!=e&&!l(e))throw new TypeError("Argument must be a Number");if(null!=t&&!f(t))throw new TypeError("Argument must be a Query");let n={query:{}};return null!=e&&(n.window_size=e),null!=t&&(n.query.rescore_query=t.toJSON()),{rescoreQuery:function(e){if(null==e)return n.query.rescore_query;if(!f(e))throw new TypeError("Argument must be a Query");return n.query.rescore_query=e.toJSON(),this},queryWeight:function(e){if(null==e)return n.query.query_weight;if(!l(e))throw new TypeError("Argument must be a Number");return n.query.query_weight=e,this},rescoreQueryWeight:function(e){if(null==e)return n.query.rescore_query_weight;if(!l(e))throw new TypeError("Argument must be a Number");return n.query.rescore_query_weight=e,this},windowSize:function(e){if(null==e)return n.window_size;if(!l(e))throw new TypeError("Argument must be a Number");return n.window_size=e,this},scoreMode:function(e){return null==e?n.query.score_mode:("total"!==(e=e.toLowerCase())&&"min"!==e&&"max"!==e&&"multiply"!==e&&"avg"!==e||(n.query.score_mode=e),this)},_type:function(){return"rescore"},toJSON:function(){return n}}},N.ScriptField=function(e){let t={};return t[e]={},{lang:function(n){return null==n?t[e].lang:(t[e].lang=n,this)},script:function(n){return null==n?t[e].script:(t[e].script=n,this)},params:function(n){return null==n?t[e].params:(t[e].params=n,this)},ignoreFailure:function(n){return null==n?t[e].ignore_failure:(t[e].ignore_failure=n,this)},_type:function(){return"script field"},toJSON:function(){return t}}},N.Shape=function(e,t){let n={},r=function(e){let t=!1;return"point"!==e&&"linestring"!==e&&"polygon"!==e&&"multipoint"!==e&&"envelope"!==e&&"multipolygon"!==e&&"circle"!==e&&"multilinestring"!==e||(t=!0),t};return e=e.toLowerCase(),r(e)&&(n.type=e,n.coordinates=t),{type:function(e){return null==e?n.type:(e=e.toLowerCase(),r(e)&&(n.type=e),this)},coordinates:function(e){return null==e?n.coordinates:(n.coordinates=e,this)},radius:function(e){return null==e?n.radius:(n.radius=e,this)},_type:function(){return"shape"},toJSON:function(){return n}}},N.Sort=function(e){null==e&&(e="_score");let t={},n=e;return t[n]={},{field:function(r){let i=t[n];return null==r?e:(delete t[n],e=r,t[n=r]=i,this)},geoDistance:function(r){let i=t[n];if(null==r)return t[n][e];if(!p(r))throw new TypeError("Argument must be a GeoPoint");return delete t[n],t[n="_geo_distance"]=i,t[n][e]=r.toJSON(),this},script:function(e){let r=t[n];return null==e?t[n].script:(delete t[n],t[n="_script"]=r,t[n].script=e,this)},order:function(e){return null==e?t[n].order:("asc"!==(e=e.toLowerCase())&&"desc"!==e||(t[n].order=e),this)},asc:function(){return t[n].order="asc",this},desc:function(){return t[n].order="desc",this},reverse:function(e){return null==e?t[n].reverse:(t[n].reverse=e,this)},missing:function(e){return null==e?t[n].missing:(t[n].missing=e,this)},ignoreUnmapped:function(e){return null==e?t[n].ignore_unmapped:(t[n].ignore_unmapped=e,this)},unit:function(e){return null==e?t[n].unit:("mi"!==(e=e.toLowerCase())&&"km"!==e||(t[n].unit=e),this)},normalize:function(e){return null==e?t[n].normalize:(t[n].normalize=e,this)},distanceType:function(e){return null==e?t[n].distance_type:("arc"!==(e=e.toLowerCase())&&"plane"!==e||(t[n].distance_type=e),this)},params:function(e){return null==e?t[n].params:(t[n].params=e,this)},lang:function(e){return null==e?t[n].lang:(t[n].lang=e,this)},type:function(e){return null==e?t[n].type:("string"!==(e=e.toLowerCase())&&"number"!==e||(t[n].type=e),this)},mode:function(e){return null==e?t[n].mode:("min"!==(e=e.toLowerCase())&&"max"!==e&&"sum"!==e&&"avg"!==e||(t[n].mode=e),this)},nestedPath:function(e){return null==e?t[n].nested_path:(t[n].nested_path=e,this)},nestedFilter:function(e){if(null==e)return t[n].nested_filter;if(!m(e))throw new TypeError("Argument must be a Filter");return t[n].nested_filter=e.toJSON(),this},nestedQueryFilter:function(e){if(null==e)return t[n].nested_filter;if(!f(e))throw new TypeError("Argument must be a Filter");return t[n].nested_filter=e.toJSON(),this},_type:function(){return"sort"},toJSON:function(){return t}}},N.CompletionSuggester=function(e){let t,r=N.SuggesterMixin(e),i=r.toJSON();return i[e].completion={},t=N.SuggestContextMixin(i[e].completion),n(r,t,{fuzzy:function(t){return null==t?i[e].completion.fuzzy:(t&&null==i[e].completion.fuzzy?i[e].completion.fuzzy={}:t||null==i[e].completion.fuzzy||delete i[e].completion.fuzzy,this)},transpositions:function(t){return null==i[e].completion.fuzzy&&(i[e].completion.fuzzy={}),null==t?i[e].completion.fuzzy.transpositions:(i[e].completion.fuzzy.transpositions=t,this)},unicodeAware:function(t){return null==i[e].completion.fuzzy&&(i[e].completion.fuzzy={}),null==t?i[e].completion.fuzzy.unicode_aware:(i[e].completion.fuzzy.unicode_aware=t,this)},editDistance:function(t){return null==i[e].completion.fuzzy&&(i[e].completion.fuzzy={}),null==t?i[e].completion.fuzzy.edit_distance:(i[e].completion.fuzzy.edit_distance=t,this)},minLength:function(t){return null==i[e].completion.fuzzy&&(i[e].completion.fuzzy={}),null==t?i[e].completion.fuzzy.min_length:(i[e].completion.fuzzy.min_length=t,this)},prefixLength:function(t){return null==i[e].completion.fuzzy&&(i[e].completion.fuzzy={}),null==t?i[e].completion.fuzzy.prefix_length:(i[e].completion.fuzzy.prefix_length=t,this)}})},N.DirectGenerator=function(){let e={},t=N.DirectSettingsMixin(e);return n(t,{preFilter:function(t){return null==t?e.pre_filter:(e.pre_filter=t,this)},postFilter:function(t){return null==t?e.post_filter:(e.post_filter=t,this)},field:function(t){return null==t?e.field:(e.field=t,this)},size:function(t){return null==t?e.size:(e.size=t,this)},_type:function(){return"generator"},toJSON:function(){return e}})},N.PhraseSuggester=function(e){let t,r=N.SuggesterMixin(e),u=r.toJSON();return u[e].phrase={},t=N.SuggestContextMixin(u[e].phrase),n(r,t,{realWordErrorLikelihood:function(t){return null==t?u[e].phrase.real_word_error_likelihood:(u[e].phrase.real_word_error_likelihood=t,this)},confidence:function(t){return null==t?u[e].phrase.confidence:(u[e].phrase.confidence=t,this)},separator:function(t){return null==t?u[e].phrase.separator:(u[e].phrase.separator=t,this)},maxErrors:function(t){return null==t?u[e].phrase.max_errors:(u[e].phrase.max_errors=t,this)},gramSize:function(t){return null==t?u[e].phrase.gram_size:(u[e].phrase.gram_size=t,this)},forceUnigrams:function(t){return null==t?u[e].phrase.force_unigrams:(u[e].phrase.force_unigrams=t,this)},tokenLimit:function(t){return null==t?u[e].phrase.token_limit:(u[e].phrase.token_limit=t,this)},linearSmoothing:function(t,n,r){return 0===arguments.length?u[e].phrase.smoothing:(u[e].phrase.smoothing={linear:{trigram_lambda:t,bigram_lambda:n,unigram_lambda:r}},this)},laplaceSmoothing:function(t){return null==t?u[e].phrase.smoothing:(u[e].phrase.smoothing={laplace:{alpha:t}},this)},stupidBackoffSmoothing:function(t){return null==t?u[e].phrase.smoothing:(u[e].phrase.smoothing={stupid_backoff:{discount:t}},this)},highlight:function(t,n){return 0===arguments.length?u[e].phrase.highlight:(u[e].phrase.highlight={pre_tag:t,post_tag:n},this)},directGenerator:function(t){let n,r;if(null==u[e].phrase.direct_generator&&(u[e].phrase.direct_generator=[]),null==t)return u[e].phrase.direct_generator;if(O(t))u[e].phrase.direct_generator.push(t.toJSON());else{if(!i(t))throw new TypeError("Argument must be a Generator or array of Generators");for(u[e].phrase.direct_generator=[],n=0,r=t.length;n<r;n++){if(!O(t[n]))throw new TypeError("Argument must be an array of Generators");u[e].phrase.direct_generator.push(t[n].toJSON())}}return this}})},N.TermSuggester=function(e){let t,r,i=N.SuggesterMixin(e),u=i.toJSON();return u[e].term={},t=N.DirectSettingsMixin(u[e].term),r=N.SuggestContextMixin(u[e].term),n(i,t,r)},N.noConflict=function(){return J.ejs=A,this}}elastic();